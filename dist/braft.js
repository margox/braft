!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("draft-js"),require("react-dom"),require("draft-convert"),require("draftjs-utils"));else if("function"==typeof define&&define.amd)define(["react","draft-js","react-dom","draft-convert","draftjs-utils"],t);else{var n="object"==typeof exports?t(require("react"),require("draft-js"),require("react-dom"),require("draft-convert"),require("draftjs-utils")):t(e.react,e["draft-js"],e["react-dom"],e["draft-convert"],e["draftjs-utils"]);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e,t,n,r,i){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=30)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(49);var l=n(0),s=r(l),c=n(29),f=r(c),d=n(2),h=function(e){function t(){var e,n,r,a;i(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.alive=!1,r.responsiveResolveId=null,r.dropDownHandlerElement=null,r.dropDownContentElement=null,r.componentId=r.props.componentId||"BRAFT-DROPDOWN-"+(0,d.UniqueIndex)(),r.state={active:!1,offset:0},a=n,o(r,a)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;this.alive=!0,this.fixDropDownPosition(),document.body.addEventListener("click",function(t){e.registerClickEvent(t)}),this.responsiveResolveId=f.default.resolve(function(){e.fixDropDownPosition()})}},{key:"componentWillReceiveProps",value:function(e){!this.props.disabled&&e.disabled&&this.hide()}},{key:"componentWillUnmount",value:function(){var e=this;document.body.removeEventListener("click",function(t){e.registerClickEvent(t)}),this.alive=!1,f.default.unresolve(this.responsiveResolveId)}},{key:"render",value:function(){var e=this,t=this.state,n=t.active,r=t.offset,i=this.props,o=i.caption,a=i.hoverTitle,u=i.disabled,l=i.showDropDownArrow,c=i.arrowActive,f=i.className,d=i.children;return u&&(n=!1),s.default.createElement("div",{id:this.componentId,className:"Braft-dropdown "+(n?"active ":"")+(u?"disabled ":"")+f},s.default.createElement("button",{className:"dropdown-handler",title:a,"data-braft-component-id":this.componentId,ref:function(t){return e.dropDownHandlerElement=t}},s.default.createElement("span",null,o),!1!==l&&s.default.createElement("i",{className:"icon-drop-down"})),s.default.createElement("div",{className:"dropdown-content",style:{marginLeft:r+"px"},ref:function(t){return e.dropDownContentElement=t}},s.default.createElement("i",{style:{marginLeft:-1*r},className:"dropdown-arrow"+(c?" active":"")}),d))}},{key:"fixDropDownPosition",value:function(){var e=0,t=null;t=this.props.viewWrapper?document.querySelector(this.props.viewWrapper).getBoundingClientRect():document.body.getBoundingClientRect();var n=this.dropDownHandlerElement.getBoundingClientRect(),r=this.dropDownContentElement.getBoundingClientRect(),i=n.right-n.width/2+r.width/2,o=n.left+n.width/2-r.width/2;i=t.right-i,o-=t.left,i<10?e=i-10:o<10&&(e=-1*o+10),e!==this.state.offset&&this.setState({offset:e})}},{key:"registerClickEvent",value:function(e){var t=this.props.hideOnBlur,n=!1;e.target.dataset.braftComponentId===this.componentId?n=!!e.target.dataset.keepActive||!this.state.active:!1===t&&(n=this.state.active),this.alive&&this.setState({active:n})}},{key:"show",value:function(){this.setState({active:!0})}},{key:"hide",value:function(){this.setState({active:!1})}}]),t}(s.default.Component);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UniqueIndex=function(){return isNaN(window.__BRAFT_UNIQUE_INDEX__)?window.__BRAFT_UNIQUE_INDEX__=1:window.__BRAFT_UNIQUE_INDEX__+=1,window.__BRAFT_UNIQUE_INDEX__}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.showModal=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(50);var s=n(0),c=r(s),f=n(6),d=r(f),h=n(2),p=window.$||document.querySelector.bind(document),m=function(e){function t(){var e,n,r,a;i(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.componentId="BRAFT-MODAL-"+(0,h.UniqueIndex)(),r.state={visible:!1},r.handleTransitionEnd=function(){if(!r.rootElement||!r.rootElement.classList)return!1;r.rootElement.classList.contains("active")||d.default.unmountComponentAtNode(r.rootElement)&&r.rootElement.parentNode.removeChild(r.rootElement)},r.handleCancel=function(){r.props.closeOnCancel&&r.close(),r.props.onCancel&&r.props.onCancel()},r.handleConfirm=function(){r.props.closeOnConfirm&&r.close(),r.props.onConfirm&&r.props.onConfirm()},r.close=function(){r.unrenderComponent(),r.props.onClose&&r.props.onClose()},a=n,o(r,a)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.visible&&this.setState({visible:!0},function(){e.renderComponent(e.props)})}},{key:"componentWillReceiveProps",value:function(e){this.props.visible&&!e.visible?this.unrenderComponent():(this.props.visible||e.visible)&&this.renderComponent(e)}},{key:"render",value:function(){return null}},{key:"unrenderComponent",value:function(){this.rootElement.classList.remove("active")}},{key:"renderComponent",value:function(e){var t=this,n=e.title,r=e.className,i=e.width,o=e.height,a=e.children,u=e.confirmable,l=e.showCancel,s=e.showConfirm,f=e.showClose,h=e.bottomText,m=e.language;void 0===l&&(l=!0),void 0===f&&(f=!0),void 0===s&&(s=!0);var y=c.default.createElement("div",{className:"braft-modal "+(r||"")},c.default.createElement("div",{className:"braft-modal-mask"}),c.default.createElement("div",{onTransitionEnd:this.handleTransitionEnd,style:{width:i,height:o},className:"braft-modal-content"},c.default.createElement("div",{className:"braft-modal-header"},c.default.createElement("h3",{className:"braft-modal-caption"},n),f&&c.default.createElement("button",{onClick:this.close,className:"braft-modal-close-button"},c.default.createElement("i",{className:"icon-close"}))),c.default.createElement("div",{className:"braft-modal-body"},a),c.default.createElement("div",{className:"braft-modal-footer"},c.default.createElement("div",{className:"braft-modal-addon-text"},h),c.default.createElement("div",{className:"braft-modal-buttons"},l&&c.default.createElement("button",{onClick:this.handleCancel,className:"braft-modal-cancel"},m.base.cancel),s&&c.default.createElement("button",{onClick:this.handleConfirm,className:"braft-modal-confirm "+(u?"":"disabled")},m.base.confirm)))));this.rootElement=p("#"+this.componentId),this.rootElement||(this.rootElement=document.createElement("div"),this.rootElement.id=this.componentId,this.rootElement.className="braft-modal-root",document.body.appendChild(this.rootElement)),d.default.render(y,this.rootElement),window.setImmediate(function(){t.rootElement.classList.add("active")})}}]),t}(c.default.Component);t.default=m;t.showModal=function(e){var t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var n=function(){d.default.unmountComponentAtNode(t)&&t.parentNode.removeChild(t)},r=function(){n(),e.onConfirm&&e.onConfirm()},i=function(){n(),e.onCancel&&e.onCancel()},o=function(){n(),e.onClose&&e.onClose()},a={onConfirm:r,onCancel:i,onClose:o,visible:!0,closeOnConfirm:!0,closeOnCancel:!0};return d.default.render(c.default.createElement(m,u({},e,a)),t),{close:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},i=t.getHexColor=function(e){if(e=e.replace("color:","").replace(";","").replace(" ",""),/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(e))return e;if(r[e])return r[e];if(0===e.indexOf("rgb")){var t=e.split(","),n=t.length<3?null:"#"+[t[0],t[1],t[2]].map(function(e){var t=parseInt(e.replace(/\D/g,""),10).toString(16);return 1===t.length?"0"+t:t}).join("");return/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(n)?n:null}return null};t.detectColorsFromHTML=function(e){return"string"!=typeof e?[]:(e.match(/color:[^;]{3,24};/g)||[]).map(i).filter(function(e){return e})}},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(51);var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){var t=e.active,n=e.onClick,r=e.className;return i.default.createElement("div",{onClick:function(){return n()},className:"switch-button "+r+(t?" active":"")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blocks=t.getHeadings=void 0;var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.getHeadings=function(e){return[{key:"header-one",title:e.controls.header+" 1",text:i.default.createElement("h1",null,e.controls.header," 1"),type:"block-type",command:"header-one"},{key:"header-two",title:e.controls.header+" 2",text:i.default.createElement("h2",null,e.controls.header," 2"),type:"block-type",command:"header-two"},{key:"header-three",title:e.controls.header+" 3",text:i.default.createElement("h3",null,e.controls.header," 3"),type:"block-type",command:"header-three"},{key:"header-four",title:e.controls.header+" 4",text:i.default.createElement("h4",null,e.controls.header," 4"),type:"block-type",command:"header-four"},{key:"header-five",title:e.controls.header+" 5",text:i.default.createElement("h5",null,e.controls.header," 5"),type:"block-type",command:"header-five"},{key:"header-six",title:e.controls.header+" 6",text:i.default.createElement("h6",null,e.controls.header," 6"),type:"block-type",command:"header-six"}]},t.blocks={"header-one":"h1","header-two":"h2","header-three":"h3","header-four":"h4","header-fiv":"h5","header-six":"h6",unstyled:"p",blockquote:"blockquote"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(40);var s=n(0),c=r(s),f=n(28),d=r(f),h=n(23),p=r(h),m=n(22),y=r(m),v=n(26),g=r(v),_=n(21),b=r(_),w=n(20),E=r(w),k=n(25),S=r(k),C=n(19),I=r(C),O=n(24),x=r(O),M=n(1),T=r(M),j=n(3),D=function(e){function t(){var e,n,r,a;i(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.mediaPicker=null,r.videoPicker=null,r.audioPicker=null,r.showMediaPicker=function(){r.mediaPicker.show()},a=n,o(r,a)}return a(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.editor,r=t.controls,i=t.media,o=t.extendControls,a=t.language,l=t.colors,s=t.tempColors,f=t.fontSizes,h=t.fontFamilies,m=t.emojis,v=t.viewWrapper,_=n.getSelectionBlockType(),w=(0,d.default)(a),k={editor:n,language:a,viewWrapper:v},C=o.map(function(e,t){if("split"===e.type)return c.default.createElement("span",{key:2*r.length+t,className:"split-line"});if("dropdown"===e.type){var n=e.text,i=e.className,o=e.showDropDownArrow,l=e.hoverTitle,s=e.component;return c.default.createElement(T.default,{key:t,className:"control-item dropdown "+i,caption:n,showDropDownArrow:o,viewWrapper:v,hoverTitle:l},s)}return"modal"===e.type?c.default.createElement("button",{key:2*r.length+t,title:e.title,className:"control-item button "+e.className,onClick:function(){e.modal&&(0,j.showModal)(u({},e.modal,{language:a}))}},e.text):c.default.createElement("button",{key:2*r.length+t,title:e.title,className:"control-item button "+e.className,onClick:function(){return e.onClick()}},e.text)});return c.default.createElement("div",{className:"BraftEditor-controlBar"},c.default.createElement(x.default,u({media:i,ref:function(t){return e.mediaPicker=t},mediaLibrary:n.mediaLibrary},k)),r.map(function(t,n){if("split"===t.toLowerCase())return c.default.createElement("span",{key:n,className:"split-line"});var r=w.find(function(e){return e.key.toLowerCase()===t.toLowerCase()});if(!r)return null;if("headings"===r.type)return c.default.createElement(y.default,u({key:n,current:_,onChange:function(t){return e.applyControl(t,"block-type")}},k));if("text-color"===r.type)return c.default.createElement(g.default,u({key:n,colors:l,tempColors:s},k));if("font-size"===r.type)return c.default.createElement(b.default,u({key:n,fontSizes:f,defaultCaption:r.title},k));if("font-family"===r.type)return c.default.createElement(E.default,u({key:n,fontFamilies:h,defaultCaption:r.title},k));if("emoji"===r.type)return c.default.createElement(I.default,u({key:n,emojis:m,defaultCaption:r.text},k));if("link"===r.type)return c.default.createElement(p.default,u({key:n},k));if("text-align"===r.type)return c.default.createElement(S.default,u({key:n},k));if("media"===r.type)return i.image||i.video||i.audio?c.default.createElement("button",{key:n,title:r.title,className:"control-item button",onClick:e.showMediaPicker},r.text):null;var o=e.getControlItemClassName({type:r.type,command:r.command});return c.default.createElement("button",{key:n,title:r.title,className:o,onClick:function(){return e.applyControl(r.command,r.type)}},r.text)}),C)}},{key:"getControlItemClassName",value:function(e){var t="control-item button",n=e.type,r=e.command;return"inline-style"===n&&this.props.editor.selectionHasInlineStyle(r)?t+=" active":"block-type"===n&&this.props.editor.getSelectionBlockType()===r&&(t+=" active"),t}},{key:"applyControl",value:function(e,t){var n=this;"inline-style"===t?this.props.editor.toggleSelectionInlineStyle(e):"block-type"===t?this.props.editor.toggleSelectionBlockType(e):"editor-state-method"===t&&this.props.editor[e]&&this.props.editor[e](),window.setImmediate(function(){n.props.editor.focus()})}}]),t}(c.default.Component);t.default=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFromHTMLConfig=t.getToHTMLConfig=void 0;var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=n(8),a=n(4),u=function(e,t){var n=t.getBlockForKey(e.key),r=n.getEntityAt(0),o=t.getEntity(r),a=o.getType().toLowerCase(),u=e.data,l=u.float,s=u.alignment,c=o.getData(),f=c.url,d=c.link,h=c.link_target,p=c.width,m=c.height;if("image"===a){var y={};return l?y.float=l:s&&(y.textAlign=s),d?i.default.createElement("div",{className:"media-wrap image-wrap",style:y},i.default.createElement("a",{style:{display:"inline-block"},href:d,target:h},i.default.createElement("img",{src:f,width:p,height:m}))):i.default.createElement("div",{className:"media-wrap image-wrap",style:y},i.default.createElement("img",{src:f,width:p,height:m}))}return"audio"===a?i.default.createElement("div",{className:"media-wrap audio-wrap"},i.default.createElement("audio",{controls:!0,src:f})):"video"===a?i.default.createElement("div",{className:"media-wrap video-wrap"},i.default.createElement("video",{controls:!0,src:f,width:p,height:m})):i.default.createElement("p",null)},l=function(e){return function(t){if("strikethrough"===(t=t.toLowerCase()))return i.default.createElement("span",{style:{textDecoration:"line-through"}});if("superscript"===t)return i.default.createElement("sup",null);if("subscript"===t)return i.default.createElement("sub",null);if(0===t.indexOf("color-"))return i.default.createElement("span",{style:{color:"#"+t.split("-")[1]}});if(0===t.indexOf("bgcolor-"))return i.default.createElement("span",{style:{backgroundColor:"#"+t.split("-")[1]}});if(0===t.indexOf("fontsize-"))return i.default.createElement("span",{style:{fontSize:t.split("-")[1]+"px"}});if(0===t.indexOf("fontfamily-")){var n=e.fontFamilies.find(function(e){return e.name.toLowerCase()===t.split("-")[1]});return i.default.createElement("span",{style:{fontFamily:n.family}})}}},s=function(e){return function(t){var n="",r=t.type.toLowerCase(),i=t.data.textAlign;return i&&(n=' style="text-align:'+i+';"'),"atomic"===r?u(t,e):"code-block"===r?{start:"<pre><code"+n+">",end:"</code></pre>"}:o.blocks[r]?{start:"<"+o.blocks[r]+n+">",end:"</"+o.blocks[r]+">"}:void 0}},c=function(e,t){var n=e.type.toLowerCase();return"link"===n?i.default.createElement("a",{href:e.data.href,target:e.data.target},t):"color"===n?i.default.createElement("span",{style:{color:e.data.color}},t):"bg-color"===n?i.default.createElement("span",{style:{backgroundColor:e.data.color}},t):void 0},f=(t.getToHTMLConfig=function(e){return{styleToHTML:l(e),entityToHTML:c,blockToHTML:s(e.contentState)}},function(e,t,n){if("span"===e&&t.style.color){var r=(0,a.getHexColor)(t.style.color);return r?n.add("COLOR-"+r.replace("#","").toUpperCase()):n}if("span"===e&&t.style.backgroundColor){var i=(0,a.getHexColor)(t.style.backgroundColor);return i?n.add("BGCOLOR-"+i.replace("#","").toUpperCase()):n}return"sup"===e?n.add("SUPERSCRIPT"):"sub"===e?n.add("SUBSCRIPT"):"span"===e&&t.style.fontSize?n.add("FONTSIZE-"+parseInt(t.style.fontSize,10)):"span"===e&&"line-through"===t.style.textDecoration?n.add("STRIKETHROUGH"):n}),d=function(e,t,n){if("a"===e&&!t.querySelectorAll("img").length){return n("LINK","MUTABLE",{href:t.href,target:t.target})}if("audio"===e)return n("AUDIO","IMMUTABLE",{url:t.src});if("video"===e)return n("VIDEO","IMMUTABLE",{url:t.src});if("img"===e){var r=t.parentNode,i=t.src,o=t.width,a=t.height;o=o||"auto",a=a||"auto";var u={url:i,width:o,height:a};return"a"===r.nodeName.toLowerCase()&&(u.link=r.href,u.link_target=r.target),n("IMAGE","IMMUTABLE",u)}},h=function(e,t){var n=t.style||{};return t.classList&&t.classList.contains("media-wrap")?{type:"atomic",data:{float:n.float,alignment:n.textAlign}}:"img"===e?{type:"atomic",data:{float:n.float,alignment:n.textAlign}}:"p"===e&&n.textAlign?{type:"unstyled",data:{textAlign:n.textAlign}}:void 0};t.getFromHTMLConfig=function(e){return{htmlToStyle:f,htmlToEntity:d,htmlToBlock:h}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={height:500,language:"zh",controls:["undo","redo","split","font-size","font-family","text-color","bold","italic","underline","strike-through","superscript","subscript","emoji","text-align","split","headings","list_ul","list_ol","blockquote","code","split","link","split","media"],extendControls:[],media:{image:!0,video:!0,audio:!0,uploadFn:null,sourceFn:null},colors:["#000000","#333333","#666666","#999999","#cccccc","#ffffff","#61a951","#16a085","#07a9fe","#003ba5","#8e44ad","#f32784","#c0392b","#d35400","#f39c12","#fdda00","#7f8c8d","#2c3e50"],fontSizes:[12,14,16,18,20,24,28,30,32,36,40,48,56,64,72,96,120,144],fontFamilies:[{name:"Araial",family:"Arial, Helvetica, sans-serif"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, serif"},{name:"Monospace",family:'"Courier New", Courier, monospace'},{name:"Tahoma",family:"tahoma, arial, 'Hiragino Sans GB', 宋体, sans-serif"}],emojis:["🤣","🙌","💚","💛","👏","😉","💯","💕","💞","💘","💙","💝","🖤","💜","❤️","😍","😻","💓","💗","😋","😇","😂","😹","😘","💖","😁","😀","🤞","😲","😄","😊","👍","😌","😃","😅","✌️","🤗","💋","😗","😽","😚","🤠","😙","😺","👄","😸","😏","😼","👌","😎","😆","😛","🙏","🤝","🙂","🤑","😝","😐","😑","🤤","😤","🙃","🤡","😶","😪","😴","😵","😓","👊","😦","😷","🤐","😜","🤓","👻","😥","🙄","🤔","🤒","🙁","😔","😯","☹️","☠️","😰","😩","😖","😕","😒","😣","😢","😮","😿","🤧","😫","🤥","😞","😬","👎","💀","😳","😨","🤕","🤢","😱","😭","😠","😈","😧","💔","😟","🙀","💩","👿","😡","😾","🖕"]}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=n(5),s=n(56),c=function(e){function t(){var e,n,o,a;r(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.triggerChange=function(e){return o.onChange(e),o},o.selectionCollapsed=function(){return o.selectionState.isCollapsed()},o.selectBlock=function(e){var t=e.getKey();return o.triggerChange(l.EditorState.forceSelection(o.editorState,new l.SelectionState({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:e.getLength()})))},o.selectNextBlock=function(e){var t=o.contentState.getBlockAfter(e.getKey());return o.triggerChange(t?o.selectBlock(t):o.editorState)},o.removeBlock=function(e){var t=void 0,n=void 0,r=e.getKey();return t=l.Modifier.removeRange(o.contentState,new l.SelectionState({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:e.getLength()}),"backward"),t=l.Modifier.setBlockType(t,t.getSelectionAfter(),"unstyled"),n=l.EditorState.push(o.editorState,t,"remove-range"),n=l.EditorState.forceSelection(n,t.getSelectionAfter()),o.triggerChange(n)},o.getSelectionBlock=function(){return o.contentState.getBlockForKey(o.selectionState.getAnchorKey())},o.setSelectionBlockData=function(e){return o.triggerChange((0,s.setBlockData)(o.editorState,e))},o.getSelectionBlockData=function(e){var t=o.getSelectionBlock().getData();return e?t.get(e):t},o.getSelectionBlockType=function(){return o.getSelectionBlock().getType()},o.toggleSelectionBlockType=function(e){return o.triggerChange(l.RichUtils.toggleBlockType(o.editorState,e))},o.getSelectionEntityData=function(e){var t=(0,s.getSelectionEntity)(o.editorState);if(t){var n=o.contentState.getEntity(t);if(n&&n.get("type")===e){var r=n.getData();return{href:r.href,target:r.target}}return{}}return{}},o.getSelectionInlineStyle=function(){return o.editorState.getCurrentInlineStyle()},o.selectionHasInlineStyle=function(e){return o.getSelectionInlineStyle().has(e.toUpperCase())},o.toggleSelectionInlineStyle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o.selectionState.isCollapsed())return o;e=e.toUpperCase(),t=t.filter(function(t){return t!==e});var n=(o.getSelectionInlineStyle(),t.length?t.reduce(function(e,t){return l.Modifier.removeInlineStyle(e,o.selectionState,t)},o.contentState):o.contentState),r=t.length?l.EditorState.push(o.editorState,n,"change-inline-style"):o.editorState;return o.triggerChange(l.RichUtils.toggleInlineStyle(r,e))},o.toggleSelectionAlignment=function(e){return o.setSelectionBlockData({textAlign:o.getSelectionBlockData("textAlign")!==e?e:void 0})},o.toggleSelectionColor=function(e){return o.toggleSelectionInlineStyle("COLOR-"+e.replace("#",""),o.colorList.map(function(e){return"COLOR-"+e.replace("#","").toUpperCase()}))},o.toggleSelectionBackgroundColor=function(e){return o.toggleSelectionInlineStyle("BGCOLOR-"+e.replace("#",""),o.colorList.map(function(e){return"BGCOLOR-"+e.replace("#","").toUpperCase()}))},o.toggleSelectionFontSize=function(e){return o.toggleSelectionInlineStyle("FONTSIZE-"+e,o.fontSizeList.map(function(e){return"FONTSIZE-"+e}))},o.toggleSelectionFontFamily=function(e){return o.toggleSelectionInlineStyle("FONTFAMILY-"+e,o.fontFamilyList.map(function(e){return"FONTFAMILY-"+e.name.toUpperCase()}))},o.toggleSelectionLink=function(e,t){var n={href:e,target:t};if(o.selectionState.isCollapsed()||"atomic"===o.getSelectionBlockType())return o;if(!1===e)return o.triggerChange(l.RichUtils.toggleLink(o.editorState,o.selectionState,null)),o;null===e&&delete n.href;var r=o.contentState.createEntity("LINK","MUTABLE",n),i=r.getLastCreatedEntityKey(),a=l.EditorState.set(o.editorState,{currentContent:r});return a=l.RichUtils.toggleLink(a,o.selectionState,i),a=l.EditorState.forceSelection(a,o.selectionState.merge({anchorOffset:o.selectionState.getEndOffset(),focusOffset:o.selectionState.getEndOffset()})),a=l.EditorState.push(a,l.Modifier.insertText(a.getCurrentContent(),a.getSelection()," "),"insert-text"),o.triggerChange(a)},o.insertText=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"atomic"===o.getSelectionBlockType()?o:o.selectionState.isCollapsed()?o.triggerChange(l.EditorState.push(o.editorState,l.Modifier.insertText(o.contentState,o.selectionState,e),"insert-text")):t?o.triggerChange(l.EditorState.push(o.editorState,l.Modifier.replaceText(o.contentState,o.selectionState,e),"replace-text")):o},o.replaceText=function(e){return o.insertText(e)},o.insertMedias=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return o;"atomic"===o.getSelectionBlockType()&&o.selectNextBlock();var t=e.reduce(function(e,t){var n=t.url,r=t.name,i=t.type,o=t.meta,a=e.getCurrentContent().createEntity(i,"IMMUTABLE",{url:n,name:r,type:i,meta:o}),u=a.getLastCreatedEntityKey();return l.AtomicBlockUtils.insertAtomicBlock(e,u," ")},o.editorState);return o.triggerChange(t)},o.setMediaData=function(e,t){return o.triggerChange(l.EditorState.push(o.editorState,o.contentState.mergeEntityData(e,t),"change-block-data"))},o.removeMedia=function(e){return o.removeBlock(e)},o.setMediaPosition=function(e,t){var n={},r=t.float,i=t.alignment;return void 0!==r&&(n.float=e.getData().get("float")===r?null:r),void 0!==i&&(n.alignment=e.getData().get("alignment")===i?null:i),o.selectBlock(e).setSelectionBlockData(n)},o.undo=function(){return o.triggerChange(l.EditorState.undo(o.editorState))},o.redo=function(){return o.triggerChange(l.EditorState.redo(o.editorState))},o.focus=function(){return o.draftInstance.focus(),o},o.blur=function(){return o.draftInstance.blur(),o},a=n,i(o,a)}return o(t,e),t}(u.default.Component);t.default=c},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){i(this,e),this.items=[]}return a(e,[{key:"setItems",value:function(e){this.items=e||[],this.triggerChange(),this.uploadItems()}},{key:"addItem",value:function(e){this.addItems([e])}},{key:"addItems",value:function(e){this.items=[].concat(r(this.items),r(e)),this.triggerChange(),this.uploadItems()}},{key:"selectItem",value:function(e){this.setItemState(e,{selected:!0})}},{key:"unselectItem",value:function(e){this.setItemState(e,{selected:!1})}},{key:"unselectAllItem",value:function(){this.items=this.items.map(function(e){return o({},e,{selected:!1})}),this.triggerChange()}},{key:"removeItem",value:function(e){this.items=this.items.filter(function(t){return t.id!==e}),this.triggerChange()}},{key:"setItemState",value:function(e,t){this.items=this.items.map(function(n){return n.id===e?o({},n,t):n}),this.triggerChange()}},{key:"uploadItems",value:function(){var e=this;this.items.forEach(function(t,n){if(t.uploading||t.url||t.error)return!1;if("IMAGE"===t.type){var r=URL.createObjectURL(t.file);if(e.createThumbnail(t.id,r),!e.uploadFn)return e.createInlineImage(t.id,r),!1}else if(!e.uploadFn)return e.setItemState(t.id,{error:1}),!1;e.setItemState(t.id,{uploading:!0,uploadProgress:0}),e.uploadFn({file:t.file,libraryId:t.id,success:function(n){e.setItemState(t.id,{file:null,url:n.url,uploadProgress:1,uploading:!1,selected:!0})},progress:function(n){e.setItemState(t.id,{uploading:!0,uploadProgress:n})},error:function(n){e.setItemState(t.id,{uploading:!1,error:2})}})})}},{key:"createThumbnail",value:function(e,t){var n=this;this.compressImage(t,226,226,function(t){n.setItemState(e,{thumbnail:t.url})})}},{key:"createInlineImage",value:function(e,t){var n=this;this.compressImage(t,1280,800,function(t){n.setItemState(e,{url:t.url,uploading:!1,uploadProgress:1,selected:!0})})}},{key:"compressImage",value:function(e,t,n,r){var i=new Image,o=document.createElement("canvas");i.src=e,i.onload=function(){var i=1;if(!(this.width>t||this.height>n))return r({url:e,width:this.width,height:this.height}),!1;i=this.width>this.height?t/this.width:n/this.height,o.width=this.width*i,o.height=this.height*i,o.getContext("2d").drawImage(this,0,0,o.width,o.height),r({url:o.toDataURL("image/png",1),width:o.width,height:o.height})}}},{key:"triggerChange",value:function(e){this.onChange(this.items)}},{key:"onChange",value:function(e){}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=r(i),a=n(32),u=r(a);t.default={en:o.default,zh:u.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.decorators=t.getCustomStyleMap=t.blockStyleFn=t.customBlockRenderMap=t.getBlockRendererFn=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=r(o),u=n(55),l=n(34),s=r(l),c=n(35),f=r(c),d=n(33),h=r(d),p=n(38),m=r(p),y=n(39),v=r(y),g=n(37),_=r(g),b=function(e,t){return function(n){var r=n.block.getEntityAt(0),o=n.contentState.getEntity(r),u=o.getData(),l=o.getType(),c=i({},t,{block:e,mediaData:u,entityKey:r});return"IMAGE"===l?a.default.createElement(s.default,c):"AUDIO"===l?a.default.createElement(h.default,c):"VIDEO"===l?a.default.createElement(f.default,c):null}};t.getBlockRendererFn=function(e){return function(t){return"atomic"===t.getType()?{component:b(t,e),editable:!1}:null}},t.customBlockRenderMap=(0,u.Map)({atomic:{element:""}}),t.blockStyleFn=m.default,t.getCustomStyleMap=v.default,t.decorators=_.default},function(e,t){},function(e,t){},function(e,t){e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(41);var i=n(0),o=r(i),a=n(1),u=r(a);t.default=function(e){var t=e.defaultCaption,n=(e.onChange,e.language),r=e.emojis,i=e.viewWrapper,a=e.editor,l=t||n.controls.emoji;return o.default.createElement(u.default,{caption:l,showDropDownArrow:!1,viewWrapper:i,hoverTitle:n.controls.emoji,className:"control-item dropdown braft-emoji-dropdown"},o.default.createElement("div",{className:"braft-emojis-wrap"},o.default.createElement("ul",{className:"braft-emojis"},r.map(function(e,t){return o.default.createElement("li",{key:t,"data-emoji":e,onClick:function(e){return a.insertText(e.target.dataset.emoji)}},e)}))))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(42);var i=n(0),o=r(i),a=n(1),u=r(a);t.default=function(e){var t=null,n=null,r=e.defaultCaption,i=e.editor,a=(e.onChange,e.language),l=e.fontFamilies,s=e.viewWrapper;l.find(function(e,r){return!!i.selectionHasInlineStyle("FONTFAMILY-"+e.name)&&(t=e.name,n=r,!0)});var c=0===n;return t=t||r||a.controls.fontFamily,o.default.createElement(u.default,{caption:t,viewWrapper:s,hoverTitle:a.controls.fontFamily,arrowActive:c,className:"control-item dropdown font-family-dropdown"},o.default.createElement("ul",{className:"menu"},l.map(function(e,t){return o.default.createElement("li",{key:t,className:"menu-item "+(t===n?"active":""),"data-name":e.name,onClick:function(e){return i.toggleSelectionFontFamily(e.currentTarget.dataset.name)}},o.default.createElement("span",{style:{fontFamily:e.family}},e.name))})))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(43);var i=n(0),o=r(i),a=n(1),u=r(a);t.default=function(e){var t=null,n=null,r=e.defaultCaption,i=e.editor,a=e.language,l=e.fontSizes,s=e.viewWrapper;return l.find(function(e){return!!i.selectionHasInlineStyle("FONTSIZE-"+e)&&(t=e+"px",n=e,!0)}),t=t||r||a.controls.fontSize,o.default.createElement(u.default,{caption:t,viewWrapper:s,hoverTitle:a.controls.fontSize,className:"control-item dropdown braft-font-size-dropdown"},o.default.createElement("ul",{className:"braft-font-sizes-wrap"},l.map(function(e,t){return o.default.createElement("li",{key:t,className:e===n?"active":null,"data-size":e,onClick:function(e){return i.toggleSelectionFontSize(e.target.dataset.size)}},e+"px")})))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(44);var i=n(0),o=r(i),a=n(8),u=n(1),l=r(u);t.default=function(e){var t=e.current,n=e.onChange,r=e.language,i=e.viewWrapper,u=(0,a.getHeadings)(r),s=u.findIndex(function(e){return e.command===t}),c=u[s]?u[s].title:r.controls.normal,f=0===s;return o.default.createElement(l.default,{caption:c,viewWrapper:i,hoverTitle:r.controls.headings,arrowActive:f,className:"control-item dropdown headings-dropdown"},o.default.createElement("ul",{className:"menu"},u.map(function(e,r){var i=t===e.command;return o.default.createElement("li",{key:r,className:"menu-item"+(i?" active":""),onClick:function(){return n(e.command,e.type)}},e.text)})))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(45);var l=n(0),s=r(l),c=n(7),f=r(c),d=n(1),h=r(d),p=function(e){function t(){var e,n,r,a;i(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={href:"",target:""},r.dropDownComponent=null,r.handeKeyDown=function(e){if(13===e.keyCode)return r.handleConfirm(),e.preventDefault(),!1},r.inputLink=function(e){r.setState({href:e.target.value})},r.setTarget=function(){r.setState({target:"_blank"===r.state.target?"":"_blank"})},r.handleCancel=function(){r.dropDownComponent.hide()},r.handleUnlink=function(){r.dropDownComponent.hide(),r.props.editor.toggleSelectionLink(!1)},r.handleConfirm=function(){var e=r.state,t=e.href,n=e.target;r.props.editor.toggleSelectionLink(t,n),r.dropDownComponent.hide()},a=n,o(r,a)}return a(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.editor.getSelectionEntityData("LINK"),n=t.href,r=t.target;this.setState({href:n||"",target:r||""})}},{key:"render",value:function(){var e=this,t=this.state,n=t.href,r=t.target,i=this.props,o=i.editor,a=i.language,u=i.viewWrapper,l=s.default.createElement("i",{className:"icon-link"}),c=!o.selectionCollapsed()&&"atomic"!==o.getSelectionBlockType();return s.default.createElement("div",{className:"control-item-group"},s.default.createElement(h.default,{caption:l,hoverTitle:a.controls.link,hideOnBlur:!1,viewWrapper:u,showDropDownArrow:!1,disabled:!c,ref:function(t){return e.dropDownComponent=t},className:"control-item dropdown link-editor-dropdown"},s.default.createElement("div",{className:"braft-link-editor"},s.default.createElement("div",{className:"input-group"},s.default.createElement("input",{type:"text",value:n,spellCheck:!1,placeholder:a.linkEditor.inputPlaceHolder,onKeyDown:this.handeKeyDown,onChange:this.inputLink})),s.default.createElement("div",{className:"switch-group"},s.default.createElement(f.default,{active:"_blank"===r,onClick:this.setTarget}),s.default.createElement("label",null,a.linkEditor.openInNewWindow)),s.default.createElement("div",{className:"buttons"},s.default.createElement("a",{onClick:this.handleUnlink,className:"primary pull-left",href:"javascript:void(0);"},s.default.createElement("i",{className:"icon-close"}),s.default.createElement("span",null,a.linkEditor.removeLink)),s.default.createElement("button",{onClick:this.handleConfirm,className:"primary pull-right"},a.base.confirm),s.default.createElement("button",{onClick:this.handleCancel,className:"default pull-right"},a.base.cancel)))),s.default.createElement("button",{title:a.controls.unlink,className:"control-item button",onClick:this.handleUnlink,disabled:!c||!n},s.default.createElement("i",{className:"icon-link-off"})))}}]),t}(s.default.Component);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(46);var s=n(0),c=r(s),f=n(3),d=r(f),h=n(2),p="image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg",m="video/mp4",y="audio/mp3",v=function(){return!0},g=function(e){function t(){var e,n,r,a;i(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={visible:!1,showExternalForm:!1,draging:!1,error:!1,confirmable:!1,external:{url:"",type:[r.props.media.image?"IMAGE":null,r.props.media.video?"VIDEO":null,r.props.media.audio?"AUDIO":null].filter(function(e){return e})[0]},files:[]},r.mediaFileAccept=[r.props.media.image?p:null,r.props.media.video?m:null,r.props.media.audio?y:null].filter(function(e){return e}).join(","),r.toggleFileSelected=function(e){var t=e.id,n=e.selected,i=e.error,o=e.uploading;if(i||o)return!1;n=!n,r.mediaLibrary.setItemState(t,{selected:n})},r.removeFileItem=function(e){r.mediaLibrary.removeItem(e.target.dataset.id),e.stopPropagation()},r.handleDragLeave=function(e){r.setState({draging:!1})},r.handleDragEnter=function(e){r.setState({draging:!0})},r.handleFilesPicked=function(e){var t=e.target.files,n=t.length;e.persist();!function i(o){if(o<n){if(r.validateFn(t[o])){var a={id:(new Date).getTime()+"_"+(0,h.UniqueIndex)(),file:t[o],name:t[o].name,size:t[o].size,uploadProgress:0,uploading:!1,selected:!1,error:0};0===t[o].type.indexOf("image/")&&r.props.media.image?(a.type="IMAGE",r.mediaLibrary.addItems([a])):0===t[o].type.indexOf("video/")&&r.props.media.video?(a.type="VIDEO",r.mediaLibrary.addItems([a])):0===t[o].type.indexOf("audio/")&&r.props.media.audio&&(a.type="AUDIO",r.mediaLibrary.addItems([a]))}setTimeout(function(){i(o+1)},100)}else e.target.value=null}(0)},r.inputExternal=function(e){r.setState({external:u({},r.state.external,{url:e.target.value})})},r.switchExternalType=function(e){r.setState({external:u({},r.state.external,{type:e.target.dataset.type})})},r.confirmAddExternal=function(e){if(13===e.keyCode){var t=r.state.external,n=t.url,i=t.type;n=n.split("|");var o=n.length>1?n[0]:r.props.language.mediaPicker.unnamedItem;n=n.length>1?n[1]:n[0];var a="IMAGE"===i?n:null;r.mediaLibrary.addItems([{thumbnail:a,url:n,name:o,type:i,id:(new Date).getTime()+"_"+(0,h.UniqueIndex)(),uploading:!1,uploadProgress:1,selected:!0}]),r.setState({showExternalForm:!1,external:{url:"",type:"IMAGE"}})}},r.toggleExternalMode=function(){r.setState({showExternalForm:!r.state.showExternalForm})},r.confirmInsertMedia=function(){r.props.editor.insertMedias(r.state.files.filter(function(e){return e.selected})),r.hide()},r.show=function(){r.setState({visible:!0})},r.hide=function(){r.setState({visible:!1},function(){r.mediaLibrary.unselectAllItem()})},a=n,o(r,a)}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.mediaLibrary=this.props.mediaLibrary,this.mediaLibrary.uploadFn=this.props.media.uploadFn||null,this.validateFn=this.props.media.validateFn||v,this.mediaLibrary.onChange=function(t){e.setState({files:t,confirmable:!!t.filter(function(e){return e.selected}).length})}}},{key:"render",value:function(){var e=this.props,t=(e.media,e.language),n=this.state,r=n.files,i=n.visible,o=n.external,a=n.draging,u=n.confirmable,l=n.showExternalForm,s=c.default.createElement("span",{onClick:this.toggleExternalMode,className:"braft-media-toggle-external-mode"},l?c.default.createElement("span",null,c.default.createElement("i",{className:"icon-add"})," ",t.mediaPicker.addLocalFile):c.default.createElement("span",null,c.default.createElement("i",{className:"icon-add"})," ",t.mediaPicker.addExternalSource));return c.default.createElement(d.default,{title:t.mediaPicker.caption,width:640,visible:i,language:t,className:"braft-media-picker-modal",bottomText:s,confirmable:u&&!l,onClose:this.hide,onCancel:this.hide,onConfirm:this.confirmInsertMedia},c.default.createElement("div",{className:"braft-media-picker"},c.default.createElement("div",{className:"braft-media-uploader"},r.length?c.default.createElement("div",{className:"braft-media-list-wrap"},this.buildMediaList()):c.default.createElement("div",{onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,className:"braft-media-drag-uploader "+(a?"active":"")},c.default.createElement("span",{className:"braft-media-drag-tip"},c.default.createElement("input",{accept:this.mediaFileAccept,onChange:this.handleFilesPicked,multiple:!0,type:"file"}),a?t.mediaPicker.dropTip:t.mediaPicker.dragTip)),l?c.default.createElement("div",{className:"braft-media-add-external"},c.default.createElement("div",{className:"braft-media-external-form"},c.default.createElement("input",{onKeyDown:this.confirmAddExternal,value:o.url,onChange:this.inputExternal,placeholder:t.mediaPicker.externalInputPlaceHolder}),c.default.createElement("div",{"data-type":o.type,className:"braft-media-switch-external-type"},c.default.createElement("button",{onClick:this.switchExternalType,"data-type":"IMAGE"},t.media.image),c.default.createElement("button",{onClick:this.switchExternalType,"data-type":"VIDEO"},t.media.video),c.default.createElement("button",{onClick:this.switchExternalType,"data-type":"AUDIO"},t.media.audio)),c.default.createElement("span",{className:"braft-media-external-tip"},t.mediaPicker.externalInputTip))):null)))}},{key:"buildMediaList",value:function(){var e=this;return c.default.createElement("ul",{className:"braft-media-list"},c.default.createElement("li",{className:"braft-media-add-item"},c.default.createElement("i",{className:"icon-add"}),c.default.createElement("input",{accept:this.mediaFileAccept,onChange:this.handleFilesPicked,multiple:!0,type:"file"})),this.state.files.map(function(t,n){var r=null,i=t.uploading?c.default.createElement("div",{className:"braft-media-item-uploading"},c.default.createElement("div",{className:"braft-media-item-uploading-bar",style:{width:t.uploadProgress/1+"%"}})):"";switch(t.type){case"IMAGE":r=c.default.createElement("div",{className:"braft-media-image"},i,c.default.createElement("img",{src:t.thumbnail}));break;case"VIDEO":r=c.default.createElement("div",{className:"braft-media-icon braft-media-video",title:t.url},i,c.default.createElement("i",{className:"icon-film"}),c.default.createElement("span",null,t.name||t.url));break;case"AUDIO":r=c.default.createElement("div",{className:"braft-media-icon braft-media-audio",title:t.url},i,c.default.createElement("i",{className:"icon-music"}),c.default.createElement("span",null,t.name||t.url));break;default:r=c.default.createElement("a",{className:"braft-media-icon braft-media-file",title:t.url,href:t.url},i,c.default.createElement("i",{className:"icon-file-text"}),c.default.createElement("span",null,t.name||t.url))}var o=["braft-media-item"];return t.selected&&o.push("active"),t.uploading&&o.push("uploading"),t.error&&o.push("error"),c.default.createElement("li",{key:n,title:t.name,className:o.join(" "),onClick:function(){return e.toggleFileSelected(t)}},r,c.default.createElement("span",{"data-id":t.id,onClick:e.removeFileItem,className:"braft-media-item-remove icon-close"}),c.default.createElement("span",{className:"braft-media-item-title"},t.name))}))}}]),t}(c.default.Component);t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){var e,n,o,a;r(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.state={currentAlignment:void 0},o.setAlignment=function(e){o.props.editor.toggleSelectionAlignment(e.target.dataset.alignment)},a=n,i(o,a)}return o(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({currentAlignment:e.editor.getSelectionBlockData("textAlign")})}},{key:"render",value:function(){var e=this,t=this.state.currentAlignment,n=this.props.language,r=[n.controls.alignLeft,n.controls.alignCenter,n.controls.alignRight,n.controls.alignJustify];return l.default.createElement("div",{className:"control-item-group"},["left","center","right","justify"].map(function(n,i){return l.default.createElement("button",{key:i,title:r[i],"data-alignment":n,className:"control-item button "+(n===t?"active":null),onClick:e.setAlignment},l.default.createElement("i",{className:"icon-align-"+n}))}))}}]),t}(l.default.Component);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(47);var s=n(0),c=r(s),f=n(2),d=n(1),h=r(d),p=n(27),m=r(p),y=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={colorType:"color"},r.dropDownComponentId="BRAFT-DROPDOWN-"+(0,f.UniqueIndex)(),r.switchColorType=function(e){r.setState({colorType:e.target.dataset.type})},r.toggleColor=function(e){"color"===r.state.colorType?r.props.editor.toggleSelectionColor(e):r.props.editor.toggleSelectionBackgroundColor(e),r.dropDownComponent.hide()},i=n,a(r,i)}return u(t,e),l(t,[{key:"render",value:function(){var e=this,t={},n=null,r=this.state.colorType,o=this.props,a=o.editor,u=o.language,l=o.colors,s=o.tempColors,f=o.viewWrapper;[].concat(i(l),i(s)).forEach(function(e){var i=e.replace("#","");a.selectionHasInlineStyle("COLOR-"+i)&&(t.color=e,"color"===r&&(n=e)),a.selectionHasInlineStyle("BGCOLOR-"+i)&&(t.backgroundColor=e,"backgroundColor"===r&&(n=e))});var d=c.default.createElement("i",{style:t,className:"icon-text-color"},c.default.createElement("span",{className:"path1"}),c.default.createElement("span",{className:"path2"}));return c.default.createElement(h.default,{caption:d,hoverTitle:u.controls.color,showDropDownArrow:!1,viewWrapper:f,componentId:this.dropDownComponentId,ref:function(t){return e.dropDownComponent=t},className:"control-item dropdown text-color-dropdown"},c.default.createElement("div",{className:"braft-text-color-picker-wrap"},c.default.createElement("div",{className:"braft-color-switch-buttons"},c.default.createElement("button",{"data-type":"color","data-keep-active":!0,"data-braft-component-id":this.dropDownComponentId,className:"color"===r?"active":"",onClick:this.switchColorType},u.controls.textColor),c.default.createElement("button",{"data-type":"backgroundColor","data-keep-active":!0,"data-braft-component-id":this.dropDownComponentId,className:"backgroundColor"===r?"active":"",onClick:this.switchColorType},u.controls.backgroundColor)),c.default.createElement(m.default,{width:200,language:u,current:n,disableAlpha:!0,colors:l,tempColors:s,onChange:this.toggleColor})))}}]),t}(c.default.Component);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(48);var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){var t=e.current,n=e.colors,r=e.tempColors,o=(e.onChange,e.language);return i.default.createElement("div",{className:"braft-color-list-wrap"},i.default.createElement("ul",{className:"braft-color-list"},n.map(function(n,r){var o=n===t?"color-item active":"color-item";return i.default.createElement("li",{key:r,title:n,className:o,style:{color:n},"data-color":n.replace("#",""),onClick:function(t){return e.onChange(t.currentTarget.dataset.color)}})})),r.length?i.default.createElement("div",{className:"braft-color-list-split-line"},i.default.createElement("span",null,o.controls.tempColors)):null,r.length?i.default.createElement("ul",{className:"braft-color-list"},r.map(function(n,r){var o=n===t?"color-item active":"color-item";return i.default.createElement("li",{key:r,title:n,className:o,style:{color:n},"data-color":n.replace("#",""),onClick:function(t){return e.onChange(t.currentTarget.dataset.color)}})})):null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return[{key:"undo",title:e.controls.undo,text:i.default.createElement("i",{className:"icon-undo"}),type:"editor-state-method",command:"undo"},{key:"redo",title:e.controls.redo,text:i.default.createElement("i",{className:"icon-redo"}),type:"editor-state-method",command:"redo"},{key:"bold",title:e.controls.bold,text:i.default.createElement("i",{className:"icon-bold"}),type:"inline-style",command:"bold"},{key:"italic",title:e.controls.italic,text:i.default.createElement("i",{className:"icon-italic"}),type:"inline-style",command:"italic"},{key:"underline",title:e.controls.underline,text:i.default.createElement("i",{className:"icon-underlined"}),type:"inline-style",command:"underline"},{key:"strike-through",title:e.controls.strikeThrough,text:i.default.createElement("i",{className:"icon-strikethrough"}),type:"inline-style",command:"strikethrough"},{key:"superscript",title:e.controls.superScript,text:i.default.createElement("i",{className:"icon-superscript"}),type:"inline-style",command:"superscript"},{key:"subscript",title:e.controls.subScript,text:i.default.createElement("i",{className:"icon-subscript"}),type:"inline-style",command:"subscript"},{key:"headings",title:e.controls.headings,type:"headings"},{key:"blockquote",title:e.controls.blockQuote,text:i.default.createElement("i",{className:"icon-quote"}),type:"block-type",command:"blockquote"},{key:"code",title:e.controls.code,text:i.default.createElement("i",{className:"icon-code"}),type:"block-type",command:"code-block"},{key:"list_ul",title:e.controls.unorderedList,text:i.default.createElement("i",{className:"icon-list"}),type:"block-type",command:"unordered-list-item"},{key:"list_ol",title:e.controls.orderedList,text:i.default.createElement("i",{className:"icon-list-numbered"}),type:"block-type",command:"ordered-list-item"},{key:"link",title:e.controls.link,type:"link"},{key:"text-color",title:e.controls.color,type:"text-color"},{key:"font-size",title:e.controls.fontSize,type:"font-size"},{key:"font-family",title:e.controls.fontFamily,type:"font-family"},{key:"text-align",title:e.controls.textAlign,type:"text-align"},{key:"media",title:e.controls.media,text:i.default.createElement("i",{className:"icon-media"}),type:"media"},{key:"emoji",title:e.controls.emoji,text:i.default.createElement("i",{className:"icon-emoji"}),type:"emoji"}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=[],o=!1,a=!1;t.default={resolve:function(e){var t=(0,r.UniqueIndex)();return i.push({id:t,eventHandler:e}),t},unresolve:function(e){i=i.filter(function(t){return t.id!==e})}},o||(window.addEventListener("resize",function(e){clearTimeout(a),a=setTimeout(function(){i.map(function(t){"function"==typeof t.eventHandler&&t.eventHandler(e)}),a=!1},100)}),o=!0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(16),n(17);var f=n(0),d=r(f),h=n(6),p=(r(h),n(14)),m=r(p),y=n(5),v=n(18),g=n(10),_=n(11),b=r(_),w=n(12),E=r(w),k=n(15),S=n(9),C=r(S),I=n(13),O=r(I),x=n(4),M=new y.CompositeDecorator(k.decorators),T=y.DefaultDraftBlockRenderMap.merge(k.customBlockRenderMap),j=function(e){function t(e){a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));D.call(n);var r=y.EditorState.createEmpty(M);n.editorState=r,n.contentState=r.getCurrentContent(),n.selectionState=r.getSelection(),n.mediaLibrary=new O.default,n.state={tempColors:[],editorState:r,editorProps:{}};var i=null;return window.chrome?i="chrome":window.safari?i="safari":navigator.userAgent.indexOf("Firefox")>0&&(i="firefox"),document.body.classList.add("browser-"+i),n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.initialContent&&(this.setContent(this.props.initialContent),this.contentInitialized=!0)}},{key:"componentWillReceiveProps",value:function(e){this.contentInitialized||this.props.initialContent||!e.initialContent||this.setContent(e.initialContent)}},{key:"render",value:function(){var e=this,t=this.props,n=t.controls,r=t.extendControls,i=t.height,a=t.media,u=t.language,l=t.colors,c=t.fontSizes,f=t.fontFamilies,h=t.emojis,p=t.viewWrapper,v=t.placeholder,g=this.state.tempColors;a=s({},b.default.media,a),n=n||b.default.controls,r=r||b.default.extendControls,u=m.default[u]||m.default[b.default.language],l=l||b.default.colors,c=c||b.default.fontSizes,f=f||b.default.fontFamilies,h=h||b.default.emojis,i=i||b.default.height,this.colorList=[].concat(o(l),o(g)),this.fontSizeList=c,this.fontFamilyList=f,a.uploadFn||(a.video=!1,a.audio=!1);var _={editor:this,media:a,controls:n,language:u,viewWrapper:p,extendControls:r,colors:l,tempColors:g,fontSizes:c,fontFamilies:f,emojis:h},w=(0,k.getBlockRendererFn)({editor:this,language:u,viewWrapper:p}),E=(0,k.getCustomStyleMap)({colors:[].concat(o(l),o(g)),fontSizes:c,fontFamilies:f}),S=s({ref:function(t){e.draftInstance=t},editorState:this.state.editorState,handleKeyCommand:this.handleKeyCommand,handleReturn:this.handleReturn,handlePastedText:this.handlePastedText,onChange:this.onChange,customStyleMap:E,blockStyleFn:k.blockStyleFn,blockRendererFn:w,blockRenderMap:T,placeholder:v},this.state.editorProps);return d.default.createElement("div",{className:"BraftEditor-container"},d.default.createElement(C.default,_),d.default.createElement("div",{className:"BraftEditor-content",style:{height:i}},d.default.createElement(y.Editor,S)))}}]),t}(E.default),D=function(){var e=this;this.onChange=function(t){e.editorState=t,e.contentState=t.getCurrentContent(),e.selectionState=t.getSelection(),e.setState({editorState:t},function(){clearTimeout(e.syncTimer),e.syncTimer=setTimeout(function(){var t=e.props,n=t.onChange,r=t.onRawChange,i=t.onHTMLChange;n&&n(e.getContent()),i&&i(e.getHTMLContent()),r&&r(e.getRawContent())},300)})},this.getHTMLContent=function(){return e.getContent("html")},this.getRawContent=function(){return e.getContent("raw")},this.getContent=function(t){t=t||e.props.contentFormat||"raw";var n=e.contentState,r=e.props.fontFamilies;return r=r||b.default.fontFamilies,"html"===t?(0,v.convertToHTML)((0,g.getToHTMLConfig)({contentState:n,fontFamilies:r}))(n):(0,y.convertToRaw)(n)},this.getContentState=function(){return e.contentState},this.getEditorState=function(){return e.editorState},this.getDraftInstance=function(){return e.draftInstance},this.getMediaLibraryInstance=function(){return e.mediaLibrary},this.setContent=function(t,n){var r=void 0,i={},a=e.props,u=a.contentFormat,l=a.colors,s=l||b.default.colors;return u=n||u||"raw","html"===u?(i.tempColors=[].concat(o(e.state.tempColors),o((0,x.detectColorsFromHTML)(t))).filter(function(e){return-1===s.indexOf(e)}).filter(function(e,t,n){return n.indexOf(e)===t}),r=(0,v.convertFromHTML)((0,g.getFromHTMLConfig)())(t)):"raw"===u&&(r=(0,y.convertFromRaw)(t)),i.editorState=y.EditorState.createWithContent(r,M),e.setState(i),e},this.setEditorProp=function(t,n){return e.setState({editorProps:s({},e.state.editorProps,i({},t,n))}),e},this.forceRender=function(){return e.setState({editorState:y.EditorState.createWithContent(e.contentState,M)}),e},this.handleKeyCommand=function(t){var n=y.RichUtils.handleKeyCommand(e.editorState,t);return!!n&&(e.onChange(n),!0)},this.handleReturn=function(t){var n=e.getSelectionBlock(),r=n.getType();return("unordered-list-item"===r||"ordered-list-item"===r)&&(0===n.getLength()&&(e.toggleBlock("unstyled"),!0))},this.handlePastedText=function(t,n){if(!n)return!1;var r=e.state.tempColors,i=(0,v.convertFromHTML)((0,g.getFromHTMLConfig)())(n||t).blockMap,a=y.Modifier.replaceWithFragment(e.contentState,e.selectionState,i),u=e.props.colors||b.default.colors;return e.setState({tempColors:[].concat(o(r),o((0,x.detectColorsFromHTML)(n))).filter(function(e){return-1===u.indexOf(e)}).filter(function(e,t,n){return n.indexOf(e)===t})},function(){e.onChange(y.EditorState.push(e.editorState,a,"insert-fragment"))}),!0}};t.default=j},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={base:{remove:"Remove",cancel:"Cancel",confirm:"Confirm",inert:"Insert"},controls:{undo:"Undo",redo:"Redo",fontSize:"Font Size",color:"Color",textColor:"Text",tempColors:"Temp Colors",backgroundColor:"Background",bold:"Bold",italic:"Italic",underline:"Underline",strikeThrough:"Strike Through",fontFamily:"Font Family",textAlign:"Text Alignment",alignLeft:"Left Alignment",alignCenter:"Center Alignment",alignRight:"Right Alignment",alignJustify:"Justify Alignment",floatLeft:"Left Float",floatRight:"Right Float",superScript:"Super Script",subScript:"Sub Script",headings:"Headings",header:"Header",normal:"Normal",orderedList:"Ordered List",unorderedList:"Unordered List",blockQuote:"Quote",code:"Code",link:"Link",unlink:"Unlink",media:"Media",emoji:"Emoji"},linkEditor:{inputPlaceHolder:"Input link URL",inputWithEnterPlaceHolder:"Input link URL and press Enter",openInNewWindow:"Open in new window",removeLink:"Remove Link"},audioPlayer:{title:"Play Audio"},videoPlayer:{title:"Play Video"},media:{image:"Image",video:"Video",audio:"Audio"},mediaPicker:{caption:"Media Library",dragTip:"Click Or Drag Files Here",dropTip:"Drop To Upload",externalInputPlaceHolder:"Source Name|Source URL",externalInputTip:'Split source name and source URL with "|", confirm by hit Enter.',addLocalFile:"Add from local",addExternalSource:"Add from Internet",unnamedItem:"Unnamed Item"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={base:{remove:"删除",cancel:"取消",confirm:"确定",inert:"插入"},controls:{undo:"撤销",redo:"重做",fontSize:"字号",color:"颜色",textColor:"文字颜色",backgroundColor:"背景颜色",tempColors:"临时颜色",bold:"加粗",italic:"斜体",underline:"下划线",strikeThrough:"删除线",fontFamily:"字体",textAlign:"文本对齐",alignLeft:"居左",alignCenter:"居中",alignRight:"居右",alignJustify:"两端",floatLeft:"左浮动",floatRight:"右浮动",superScript:"上标",subScript:"下标",headings:"标题",header:"标题",normal:"常规",orderedList:"有序列表",unorderedList:"无序列表",blockQuote:"引用",code:"代码",link:"链接",unlink:"清除链接",media:"媒体",emoji:"小表情"},linkEditor:{inputPlaceHolder:"输入链接地址",inputWithEnterPlaceHolder:"输入链接地址并回车",openInNewWindow:"在新窗口打开",removeLink:"移除链接"},audioPlayer:{title:"播放音频文件"},videoPlayer:{title:"播放视频文件"},media:{image:"图像",video:"视频",audio:"音频"},mediaPicker:{caption:"多媒体资源库",dragTip:"点击或拖动文件至此",dropTip:"松开鼠标以上传",externalInputPlaceHolder:"资源名称|资源地址",externalInputTip:'以竖线符("|")分割资源名和资源地址，按回车确认',addLocalFile:"添加本地文件",addExternalSource:"添加网络资源",unnamedItem:"未命名项目"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(52);var u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=n(3),c=function(e){function t(){var e,n,o,a;r(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.state={toolbarVisible:!1,playerVisible:!1},o.showPlayer=function(){(0,s.showModal)({title:o.props.language.audioPlayer.title,width:480,confirmable:!0,language:o.props.language,showCancel:!1,onClose:o.handlePlayerClose,children:l.default.createElement("audio",{className:"braft-embed-audio-player",src:o.props.mediaData.url,controls:!0})})},o.removeAudio=function(){o.props.editor.removeBlock(o.props.block)},o.showToolbar=function(){o.setState({toolbarVisible:!0})},o.hideToolbar=function(){o.setState({toolbarVisible:!1})},o.handlePlayerClose=function(){o.props.editor.focus()},a=n,i(o,a)}return o(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.toolbarVisible,r=(t.playerVisible,this.props),i=r.mediaData,o=(r.language,i.url),a=(i.width,i.height,i.name);return l.default.createElement("div",{className:"braft-media-audio-holder",onMouseOver:this.showToolbar,onMouseLeave:this.hideToolbar},l.default.createElement("i",{className:"icon-music"}),l.default.createElement("h5",null,a),l.default.createElement("h6",null,o),n?l.default.createElement("div",{ref:function(t){return e.toolbarElement=t},className:"braft-embed-audio-toolbar"},l.default.createElement("a",{onClick:this.showPlayer},""),l.default.createElement("a",{onClick:this.removeAudio},"")):null)}}]),t}(l.default.Component);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(53);var l=n(0),s=r(l),c=n(7),f=r(c),d=function(e){function t(){var e,n,r,a;i(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={toolbarVisible:!1,toolbarOffset:0,linkEditorVisible:!1},r.removeImage=function(e){r.props.editor.removeBlock(r.props.block),r.props.editor.setEditorProp("readOnly",!1)},r.toggleLinkEditor=function(){r.setState({linkEditorVisible:!r.state.linkEditorVisible})},r.setImageLink=function(e){if(13===e.keyCode){var t=e.currentTarget.value.trim();r.props.editor.setMediaData(r.props.entityKey,{link:t}),window.setImmediate(r.props.editor.forceRender)}},r.setImageFloat=function(e){var t=e.currentTarget.dataset.float;r.props.editor.setMediaPosition(r.props.block,{float:t}),r.props.editor.setEditorProp("readOnly",!1)},r.setImageAlignment=function(e){var t=e.currentTarget.dataset.alignment;r.props.editor.setMediaPosition(r.props.block,{alignment:t}),r.props.editor.setEditorProp("readOnly",!1)},r.showToolbar=function(){r.state.toolbarVisible||r.setState({toolbarVisible:!0},function(){r.props.editor.setEditorProp("readOnly",!0),r.setState({toolbarOffset:r.calcToolbarOffset()})})},r.hideToolbar=function(){r.setState({toolbarVisible:!1},function(){r.props.editor.setEditorProp("readOnly",!1)})},a=n,o(r,a)}return a(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.mediaData,r=t.language,i=this.state,o=i.toolbarVisible,a=i.toolbarOffset,u=i.linkEditorVisible,l=this.props.block.getData(),c=l.get("float"),d=l.get("alignment"),h=n.url,p=n.link,m=n.link_target,y=n.width,v=n.height,g={},_=!1;return c?d=null:"left"===d?(g.float="left",_=!0):"right"===d?(g.float="right",_=!0):"center"===d?g.textAlign="center":(g.float="left",_=!0),s.default.createElement("div",{className:"braft-media-embeder"},s.default.createElement("div",{style:g,className:"braft-embed-image",onMouseOver:this.showToolbar,onMouseLeave:this.hideToolbar},o&&s.default.createElement("div",{style:{marginLeft:a},ref:function(t){return e.toolbarElement=t},"data-float":c,"data-alignment":d,className:"braft-embed-image-toolbar"},u&&s.default.createElement("div",{onClick:this.preventDefault,className:"braft-embed-image-link-editor"},s.default.createElement("input",{type:"text",placeholder:r.linkEditor.inputWithEnterPlaceHolder,onKeyDown:this.setImageLink,defaultValue:p}),s.default.createElement("div",{className:"switch-group"},s.default.createElement(f.default,{active:"_blank"===m,onClick:function(){return e.setImageLinkTarget(m)}}),s.default.createElement("label",null,r.linkEditor.openInNewWindow))),s.default.createElement("a",{"data-float":"left",onClick:this.setImageFloat},""),s.default.createElement("a",{"data-float":"right",onClick:this.setImageFloat},""),s.default.createElement("a",{"data-alignment":"left",onClick:this.setImageAlignment},""),s.default.createElement("a",{"data-alignment":"center",onClick:this.setImageAlignment},""),s.default.createElement("a",{"data-alignment":"right",onClick:this.setImageAlignment},""),s.default.createElement("a",{className:p?"active":"",onClick:this.toggleLinkEditor},""),s.default.createElement("a",{onClick:this.removeImage},""),s.default.createElement("i",{style:{marginLeft:-1*a},className:"braft-embed-image-toolbar-arrow"})),s.default.createElement("img",{ref:function(t){return e.imageElement=t},src:h,width:y,height:v})),_&&s.default.createElement("div",{className:"clearfix",style:{clear:"both",height:0,lineHeight:0,float:"none"}}))}},{key:"calcToolbarOffset",value:function(){var e=null;e=this.props.viewWrapper?document.querySelector(this.props.viewWrapper).getBoundingClientRect():document.body.getBoundingClientRect();var t=this.toolbarElement.getBoundingClientRect(),n=this.imageElement.getBoundingClientRect(),r=n.right-n.width/2+t.width/2,i=n.left+n.width/2-t.width/2;return r=e.right-r,i-=e.left,r<10?r-10:i<10?-1*i+10:0}},{key:"setImageLinkTarget",value:function(e){e="_blank"===e?"":"_blank",this.props.editor.setMediaData(this.props.entityKey,{link_target:e}),window.setImmediate(this.props.editor.forceRender)}}]),t}(s.default.Component);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(54);var u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=n(3),c=function(e){function t(){var e,n,o,a;r(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.state={toolbarVisible:!1,playerVisible:!1},o.showPlayer=function(){(0,s.showModal)({title:o.props.language.videoPlayer.title,width:480,confirmable:!0,language:o.props.language,showCancel:!1,onClose:o.handlePlayerClose,children:l.default.createElement("video",{className:"braft-embed-video-player",src:o.props.mediaData.url,controls:!0})})},o.removevideo=function(){o.props.editor.removeBlock(o.props.block)},o.showToolbar=function(){o.setState({toolbarVisible:!0})},o.hideToolbar=function(){o.setState({toolbarVisible:!1})},o.handlePlayerClose=function(){o.props.editor.focus()},a=n,i(o,a)}return o(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.toolbarVisible,r=(t.playerVisible,this.props),i=r.mediaData,o=(r.language,i.url),a=(i.width,i.height,i.name);return l.default.createElement("div",{className:"braft-media-video-holder",onMouseOver:this.showToolbar,onMouseLeave:this.hideToolbar},l.default.createElement("i",{className:"icon-film"}),l.default.createElement("h5",null,a),l.default.createElement("h6",null,o),n?l.default.createElement("div",{ref:function(t){return e.toolbarElement=t},className:"braft-embed-video-toolbar"},l.default.createElement("a",{onClick:this.showPlayer},""),l.default.createElement("a",{onClick:this.removevideo},"")):null)}}]),t}(l.default.Component);t.default=c},function(e,t,n){"use strict";function r(e,t,n){e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()},t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(e){var t=e.children,n=e.entityKey,r=e.contentState,i=r.getEntity(n).getData(),a=i.href,u=i.target;return o.default.createElement("span",{className:"braft-link-wrap"},o.default.createElement("a",{className:"braft-link",href:a,target:u},t))};t.default={strategy:r,component:a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=[i.default]},function(e,t,n){"use strict";function r(e){var t=e.getData()&&e.getData().get("textAlign"),n=e.getData()&&e.getData().get("float"),r=null;return t&&(r="braft-"+t+"-aligned-block"),n&&(r+=" braft-float-"+n),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t={},n={},i={},o={};return e.colors.forEach(function(e){var r=e.replace("#","").toUpperCase();t["COLOR-"+r]={color:e},n["BGCOLOR-"+r]={backgroundColor:e}}),e.fontSizes.forEach(function(e){i["FONTSIZE-"+e]={fontSize:e}}),e.fontFamilies.forEach(function(e){o["FONTFAMILY-"+e.name.toUpperCase()]={fontFamily:e.family}}),r({SUPERSCRIPT:{position:"relative",top:"-8px",fontSize:"11px"},SUBSCRIPT:{position:"relative",bottom:"-8px",fontSize:"11px"}},t,n,i,o)}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return o(e)?e:M(e)}function n(e){return a(e)?e:T(e)}function r(e){return u(e)?e:j(e)}function i(e){return o(e)&&!l(e)?e:D(e)}function o(e){return!(!e||!e[sn])}function a(e){return!(!e||!e[cn])}function u(e){return!(!e||!e[fn])}function l(e){return a(e)||u(e)}function s(e){return!(!e||!e[dn])}function c(e){return e.value=!1,e}function f(e){e&&(e.value=!0)}function d(){}function h(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function p(e){return void 0===e.size&&(e.size=e.__iterate(y)),e.size}function m(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?p(e)+t:t}function y(){return!0}function v(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function g(e,t){return b(e,t,0)}function _(e,t){return b(e,t,t)}function b(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function w(e){this.next=e}function E(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function k(){return{value:void 0,done:!0}}function S(e){return!!O(e)}function C(e){return e&&"function"==typeof e.next}function I(e){var t=O(e);return t&&t.call(e)}function O(e){var t=e&&(En&&e[En]||e[kn]);if("function"==typeof t)return t}function x(e){return e&&"number"==typeof e.length}function M(e){return null===e||void 0===e?R():o(e)?e.toSeq():B(e)}function T(e){return null===e||void 0===e?R().toKeyedSeq():o(e)?a(e)?e.toSeq():e.fromEntrySeq():q(e)}function j(e){return null===e||void 0===e?R():o(e)?a(e)?e.entrySeq():e.toIndexedSeq():F(e)}function D(e){return(null===e||void 0===e?R():o(e)?a(e)?e.entrySeq():e:F(e)).toSetSeq()}function z(e){this._array=e,this.size=e.length}function N(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function A(e){this._iterable=e,this.size=e.length||e.size}function P(e){this._iterator=e,this._iteratorCache=[]}function L(e){return!(!e||!e[Cn])}function R(){return In||(In=new z([]))}function q(e){var t=Array.isArray(e)?new z(e).fromEntrySeq():C(e)?new P(e).fromEntrySeq():S(e)?new A(e).fromEntrySeq():"object"==typeof e?new N(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function F(e){var t=U(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function B(e){var t=U(e)||"object"==typeof e&&new N(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function U(e){return x(e)?new z(e):C(e)?new P(e):S(e)?new A(e):void 0}function K(e,t,n,r){var i=e._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var u=i[n?o-a:a];if(!1===t(u[1],r?u[0]:a,e))return a+1}return a}return e.__iterateUncached(t,n)}function H(e,t,n,r){var i=e._cache;if(i){var o=i.length-1,a=0;return new w(function(){var e=i[n?o-a:a];return a++>o?k():E(t,r?e[0]:a-1,e[1])})}return e.__iteratorUncached(t,n)}function W(e,t){return t?V(t,e,"",{"":e}):G(e)}function V(e,t,n,r){return Array.isArray(t)?e.call(r,n,j(t).map(function(n,r){return V(e,n,r,t)})):J(t)?e.call(r,n,T(t).map(function(n,r){return V(e,n,r,t)})):t}function G(e){return Array.isArray(e)?j(e).map(G).toList():J(e)?T(e).map(G).toMap():e}function J(e){return e&&(e.constructor===Object||void 0===e.constructor)}function Q(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function Y(e,t){if(e===t)return!0;if(!o(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||a(e)!==a(t)||u(e)!==u(t)||s(e)!==s(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!l(e);if(s(e)){var r=e.entries();return t.every(function(e,t){var i=r.next().value;return i&&Q(i[1],e)&&(n||Q(i[0],t))})&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var c=e;e=t,t=c}var f=!0,d=t.__iterate(function(t,r){if(n?!e.has(t):i?!Q(t,e.get(r,yn)):!Q(e.get(r,yn),t))return f=!1,!1});return f&&e.size===d}function X(e,t){if(!(this instanceof X))return new X(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(On)return On;On=this}}function Z(e,t){if(!e)throw new Error(t)}function $(e,t,n){if(!(this instanceof $))return new $(e,t,n);if(Z(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(xn)return xn;xn=this}}function ee(){throw TypeError("Abstract")}function te(){}function ne(){}function re(){}function ie(e){return e>>>1&1073741824|3221225471&e}function oe(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return ie(n)}if("string"===t)return e.length>Pn?ae(e):ue(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return le(e);if("function"==typeof e.toString)return ue(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function ae(e){var t=qn[e];return void 0===t&&(t=ue(e),Rn===Ln&&(Rn=0,qn={}),Rn++,qn[e]=t),t}function ue(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ie(t)}function le(e){var t;if(zn&&void 0!==(t=Mn.get(e)))return t;if(void 0!==(t=e[An]))return t;if(!Dn){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[An]))return t;if(void 0!==(t=se(e)))return t}if(t=++Nn,1073741824&Nn&&(Nn=0),zn)Mn.set(e,t);else{if(void 0!==jn&&!1===jn(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Dn)Object.defineProperty(e,An,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[An]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[An]=t}}return t}function se(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function ce(e){Z(e!==1/0,"Cannot perform this action with an infinite size.")}function fe(e){return null===e||void 0===e?Ee():de(e)&&!s(e)?e:Ee().withMutations(function(t){var r=n(e);ce(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function de(e){return!(!e||!e[Fn])}function he(e,t){this.ownerID=e,this.entries=t}function pe(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function me(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function ye(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function ve(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function ge(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&be(e._root)}function _e(e,t){return E(e,t[0],t[1])}function be(e,t){return{node:e,index:0,__prev:t}}function we(e,t,n,r){var i=Object.create(Bn);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ee(){return Un||(Un=we(0))}function ke(e,t,n){var r,i;if(e._root){var o=c(vn),a=c(gn);if(r=Se(e._root,e.__ownerID,0,void 0,t,n,o,a),!a.value)return e;i=e.size+(o.value?n===yn?-1:1:0)}else{if(n===yn)return e;i=1,r=new he(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?we(i,r):Ee()}function Se(e,t,n,r,i,o,a,u){return e?e.update(t,n,r,i,o,a,u):o===yn?e:(f(u),f(a),new ve(t,r,[i,o]))}function Ce(e){return e.constructor===ve||e.constructor===ye}function Ie(e,t,n,r,i){if(e.keyHash===r)return new ye(t,r,[e.entry,i]);var o,a=(0===n?e.keyHash:e.keyHash>>>n)&mn,u=(0===n?r:r>>>n)&mn;return new pe(t,1<<a|1<<u,a===u?[Ie(e,t,n+hn,r,i)]:(o=new ve(t,r,i),a<u?[e,o]:[o,e]))}function Oe(e,t,n,r){e||(e=new d);for(var i=new ve(e,oe(n),[n,r]),o=0;o<t.length;o++){var a=t[o];i=i.update(e,0,void 0,a[0],a[1])}return i}function xe(e,t,n,r){for(var i=0,o=0,a=new Array(n),u=0,l=1,s=t.length;u<s;u++,l<<=1){var c=t[u];void 0!==c&&u!==r&&(i|=l,a[o++]=c)}return new pe(e,i,a)}function Me(e,t,n,r,i){for(var o=0,a=new Array(pn),u=0;0!==n;u++,n>>>=1)a[u]=1&n?t[o++]:void 0;return a[r]=i,new me(e,o+1,a)}function Te(e,t,r){for(var i=[],a=0;a<r.length;a++){var u=r[a],l=n(u);o(u)||(l=l.map(function(e){return W(e)})),i.push(l)}return ze(e,t,i)}function je(e,t,n){return e&&e.mergeDeep&&o(t)?e.mergeDeep(t):Q(e,t)?e:t}function De(e){return function(t,n,r){if(t&&t.mergeDeepWith&&o(n))return t.mergeDeepWith(e,n);var i=e(t,n,r);return Q(t,i)?t:i}}function ze(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,yn,function(e){return e===yn?n:t(e,n,r)})}:function(t,n){e.set(n,t)},i=0;i<n.length;i++)n[i].forEach(r)}):e.constructor(n[0])}function Ne(e,t,n,r){var i=e===yn,o=t.next();if(o.done){var a=i?n:e,u=r(a);return u===a?e:u}Z(i||e&&e.set,"invalid keyPath");var l=o.value,s=i?yn:e.get(l,yn),c=Ne(s,t,n,r);return c===s?e:c===yn?e.remove(l):(i?Ee():e).set(l,c)}function Ae(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function Pe(e,t,n,r){var i=r?e:h(e);return i[t]=n,i}function Le(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var o=new Array(i),a=0,u=0;u<i;u++)u===t?(o[u]=n,a=-1):o[u]=e[u+a];return o}function Re(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),o=0,a=0;a<r;a++)a===t&&(o=1),i[a]=e[a+o];return i}function qe(e){var t=He();if(null===e||void 0===e)return t;if(Fe(e))return e;var n=r(e),i=n.size;return 0===i?t:(ce(i),i>0&&i<pn?Ke(0,i,hn,null,new Be(n.toArray())):t.withMutations(function(e){e.setSize(i),n.forEach(function(t,n){return e.set(n,t)})}))}function Fe(e){return!(!e||!e[Vn])}function Be(e,t){this.array=e,this.ownerID=t}function Ue(e,t){function n(e,t,n){return 0===t?r(e,n):i(e,t,n)}function r(e,n){var r=n===u?l&&l.array:e&&e.array,i=n>o?0:o-n,s=a-n;return s>pn&&(s=pn),function(){if(i===s)return Qn;var e=t?--s:i++;return r&&r[e]}}function i(e,r,i){var u,l=e&&e.array,s=i>o?0:o-i>>r,c=1+(a-i>>r);return c>pn&&(c=pn),function(){for(;;){if(u){var e=u();if(e!==Qn)return e;u=null}if(s===c)return Qn;var o=t?--c:s++;u=n(l&&l[o],r-hn,i+(o<<r))}}}var o=e._origin,a=e._capacity,u=Xe(a),l=e._tail;return n(e._root,e._level,0)}function Ke(e,t,n,r,i,o,a){var u=Object.create(Gn);return u.size=t-e,u._origin=e,u._capacity=t,u._level=n,u._root=r,u._tail=i,u.__ownerID=o,u.__hash=a,u.__altered=!1,u}function He(){return Jn||(Jn=Ke(0,0,hn))}function We(e,t,n){if((t=m(e,t))!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Qe(e,t).set(0,n):Qe(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,o=c(gn);return t>=Xe(e._capacity)?r=Ve(r,e.__ownerID,0,t,n,o):i=Ve(i,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):Ke(e._origin,e._capacity,e._level,i,r):e}function Ve(e,t,n,r,i,o){var a=r>>>n&mn,u=e&&a<e.array.length;if(!u&&void 0===i)return e;var l;if(n>0){var s=e&&e.array[a],c=Ve(s,t,n-hn,r,i,o);return c===s?e:(l=Ge(e,t),l.array[a]=c,l)}return u&&e.array[a]===i?e:(f(o),l=Ge(e,t),void 0===i&&a===l.array.length-1?l.array.pop():l.array[a]=i,l)}function Ge(e,t){return t&&e&&t===e.ownerID?e:new Be(e?e.array.slice():[],t)}function Je(e,t){if(t>=Xe(e._capacity))return e._tail;if(t<1<<e._level+hn){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&mn],r-=hn;return n}}function Qe(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new d,i=e._origin,o=e._capacity,a=i+t,u=void 0===n?o:n<0?o+n:i+n;if(a===i&&u===o)return e;if(a>=u)return e.clear();for(var l=e._level,s=e._root,c=0;a+c<0;)s=new Be(s&&s.array.length?[void 0,s]:[],r),l+=hn,c+=1<<l;c&&(a+=c,i+=c,u+=c,o+=c);for(var f=Xe(o),h=Xe(u);h>=1<<l+hn;)s=new Be(s&&s.array.length?[s]:[],r),l+=hn;var p=e._tail,m=h<f?Je(e,u-1):h>f?new Be([],r):p;if(p&&h>f&&a<o&&p.array.length){s=Ge(s,r);for(var y=s,v=l;v>hn;v-=hn){var g=f>>>v&mn;y=y.array[g]=Ge(y.array[g],r)}y.array[f>>>hn&mn]=p}if(u<o&&(m=m&&m.removeAfter(r,0,u)),a>=h)a-=h,u-=h,l=hn,s=null,m=m&&m.removeBefore(r,0,a);else if(a>i||h<f){for(c=0;s;){var _=a>>>l&mn;if(_!==h>>>l&mn)break;_&&(c+=(1<<l)*_),l-=hn,s=s.array[_]}s&&a>i&&(s=s.removeBefore(r,l,a-c)),s&&h<f&&(s=s.removeAfter(r,l,h-c)),c&&(a-=c,u-=c)}return e.__ownerID?(e.size=u-a,e._origin=a,e._capacity=u,e._level=l,e._root=s,e._tail=m,e.__hash=void 0,e.__altered=!0,e):Ke(a,u,l,s,m)}function Ye(e,t,n){for(var i=[],a=0,u=0;u<n.length;u++){var l=n[u],s=r(l);s.size>a&&(a=s.size),o(l)||(s=s.map(function(e){return W(e)})),i.push(s)}return a>e.size&&(e=e.setSize(a)),ze(e,t,i)}function Xe(e){return e<pn?0:e-1>>>hn<<hn}function Ze(e){return null===e||void 0===e?tt():$e(e)?e:tt().withMutations(function(t){var r=n(e);ce(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function $e(e){return de(e)&&s(e)}function et(e,t,n,r){var i=Object.create(Ze.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i}function tt(){return Yn||(Yn=et(Ee(),He()))}function nt(e,t,n){var r,i,o=e._map,a=e._list,u=o.get(t),l=void 0!==u;if(n===yn){if(!l)return e;a.size>=pn&&a.size>=2*o.size?(i=a.filter(function(e,t){return void 0!==e&&u!==t}),r=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=o.remove(t),i=u===a.size-1?a.pop():a.set(u,void 0))}else if(l){if(n===a.get(u)[1])return e;r=o,i=a.set(u,[t,n])}else r=o.set(t,a.size),i=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e):et(r,i)}function rt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function ot(e){this._iter=e,this.size=e.size}function at(e){this._iter=e,this.size=e.size}function ut(e){var t=xt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Mt,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return!1!==t(n,e,r)},n)},t.__iteratorUncached=function(t,n){if(t===wn){var r=e.__iterator(t,n);return new w(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===bn?_n:bn,n)},t}function lt(e,t,n){var r=xt(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var o=e.get(r,yn);return o===yn?i:t.call(n,o,r,e)},r.__iterateUncached=function(r,i){var o=this;return e.__iterate(function(e,i,a){return!1!==r(t.call(n,e,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=e.__iterator(wn,i);return new w(function(){var i=o.next();if(i.done)return i;var a=i.value,u=a[0];return E(r,u,t.call(n,a[1],u,e),i)})},r}function st(e,t){var n=xt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=ut(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=Mt,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function ct(e,t,n,r){var i=xt(e);return r&&(i.has=function(r){var i=e.get(r,yn);return i!==yn&&!!t.call(n,i,r,e)},i.get=function(r,i){var o=e.get(r,yn);return o!==yn&&t.call(n,o,r,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,u=0;return e.__iterate(function(e,o,l){if(t.call(n,e,o,l))return u++,i(e,r?o:u-1,a)},o),u},i.__iteratorUncached=function(i,o){var a=e.__iterator(wn,o),u=0;return new w(function(){for(;;){var o=a.next();if(o.done)return o;var l=o.value,s=l[0],c=l[1];if(t.call(n,c,s,e))return E(i,r?s:u++,c,o)}})},i}function ft(e,t,n){var r=fe().asMutable();return e.__iterate(function(i,o){r.update(t.call(n,i,o,e),0,function(e){return e+1})}),r.asImmutable()}function dt(e,t,n){var r=a(e),i=(s(e)?Ze():fe()).asMutable();e.__iterate(function(o,a){i.update(t.call(n,o,a,e),function(e){return e=e||[],e.push(r?[a,o]:o),e})});var o=Ot(e);return i.map(function(t){return St(e,o(t))})}function ht(e,t,n,r){var i=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n|=0),v(t,n,i))return e;var o=g(t,i),a=_(n,i);if(o!==o||a!==a)return ht(e.toSeq().cacheResult(),t,n,r);var u,l=a-o;l===l&&(u=l<0?0:l);var s=xt(e);return s.size=0===u?u:e.size&&u||void 0,!r&&L(e)&&u>=0&&(s.get=function(t,n){return t=m(this,t),t>=0&&t<u?e.get(t+o,n):n}),s.__iterateUncached=function(t,n){var i=this;if(0===u)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,l=!0,s=0;return e.__iterate(function(e,n){if(!l||!(l=a++<o))return s++,!1!==t(e,r?n:s-1,i)&&s!==u}),s},s.__iteratorUncached=function(t,n){if(0!==u&&n)return this.cacheResult().__iterator(t,n);var i=0!==u&&e.__iterator(t,n),a=0,l=0;return new w(function(){for(;a++<o;)i.next();if(++l>u)return k();var e=i.next();return r||t===bn?e:t===_n?E(t,l-1,void 0,e):E(t,l-1,e.value[1],e)})},s}function pt(e,t,n){var r=xt(e);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return e.__iterate(function(e,i,u){return t.call(n,e,i,u)&&++a&&r(e,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(wn,i),u=!0;return new w(function(){if(!u)return k();var e=a.next();if(e.done)return e;var i=e.value,l=i[0],s=i[1];return t.call(n,s,l,o)?r===wn?e:E(r,l,s,e):(u=!1,k())})},r}function mt(e,t,n,r){var i=xt(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var u=!0,l=0;return e.__iterate(function(e,o,s){if(!u||!(u=t.call(n,e,o,s)))return l++,i(e,r?o:l-1,a)}),l},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var u=e.__iterator(wn,o),l=!0,s=0;return new w(function(){var e,o,c;do{if(e=u.next(),e.done)return r||i===bn?e:i===_n?E(i,s++,void 0,e):E(i,s++,e.value[1],e);var f=e.value;o=f[0],c=f[1],l&&(l=t.call(n,c,o,a))}while(l);return i===wn?e:E(i,o,c,e)})},i}function yt(e,t){var r=a(e),i=[e].concat(t).map(function(e){return o(e)?r&&(e=n(e)):e=r?q(e):F(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var l=i[0];if(l===e||r&&a(l)||u(e)&&u(l))return l}var s=new z(i);return r?s=s.toKeyedSeq():u(e)||(s=s.toSetSeq()),s=s.flatten(!0),s.size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),s}function vt(e,t,n){var r=xt(e);return r.__iterateUncached=function(r,i){function a(e,s){var c=this;e.__iterate(function(e,i){return(!t||s<t)&&o(e)?a(e,s+1):!1===r(e,n?i:u++,c)&&(l=!0),!l},i)}var u=0,l=!1;return a(e,0),u},r.__iteratorUncached=function(r,i){var a=e.__iterator(r,i),u=[],l=0;return new w(function(){for(;a;){var e=a.next();if(!1===e.done){var s=e.value;if(r===wn&&(s=s[1]),t&&!(u.length<t)||!o(s))return n?e:E(r,l++,s,e);u.push(a),a=s.__iterator(r,i)}else a=u.pop()}return k()})},r}function gt(e,t,n){var r=Ot(e);return e.toSeq().map(function(i,o){return r(t.call(n,i,o,e))}).flatten(!0)}function _t(e,t){var n=xt(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return e.__iterate(function(e,r){return(!o||!1!==n(t,o++,i))&&!1!==n(e,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=e.__iterator(bn,r),a=0;return new w(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?E(n,a++,t):E(n,a++,i.value,i)})},n}function bt(e,t,n){t||(t=Tt);var r=a(e),i=0,o=e.toSeq().map(function(t,r){return[r,t,i++,n?n(t,r,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?T(o):u(e)?j(o):D(o)}function wt(e,t,n){if(t||(t=Tt),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return Et(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return Et(t,e,n)?n:e})}function Et(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function kt(e,n,r){var i=xt(e);return i.size=new z(r).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(bn,t),i=0;!(n=r.next()).done&&!1!==e(n.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=r.map(function(e){return e=t(e),I(i?e.reverse():e)}),a=0,u=!1;return new w(function(){var t;return u||(t=o.map(function(e){return e.next()}),u=t.some(function(e){return e.done})),u?k():E(e,a++,n.apply(null,t.map(function(e){return e.value})))})},i}function St(e,t){return L(e)?t:e.constructor(t)}function Ct(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function It(e){return ce(e.size),p(e)}function Ot(e){return a(e)?n:u(e)?r:i}function xt(e){return Object.create((a(e)?T:u(e)?j:D).prototype)}function Mt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):M.prototype.cacheResult.call(this)}function Tt(e,t){return e>t?1:e<t?-1:0}function jt(e){var n=I(e);if(!n){if(!x(e))throw new TypeError("Expected iterable or array-like: "+e);n=I(t(e))}return n}function Dt(e,t){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(e);At(i,a),i.size=a.length,i._name=t,i._keys=a,i._defaultValues=e}this._map=fe(o)},i=r.prototype=Object.create(Xn);return i.constructor=r,r}function zt(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function Nt(e){return e._name||e.constructor.name||"Record"}function At(e,t){try{t.forEach(Pt.bind(void 0,e))}catch(e){}}function Pt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Z(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Lt(e){return null===e||void 0===e?Bt():Rt(e)&&!s(e)?e:Bt().withMutations(function(t){var n=i(e);ce(n.size),n.forEach(function(e){return t.add(e)})})}function Rt(e){return!(!e||!e[Zn])}function qt(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Ft(e,t){var n=Object.create($n);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Bt(){return er||(er=Ft(Ee()))}function Ut(e){return null===e||void 0===e?Wt():Kt(e)?e:Wt().withMutations(function(t){var n=i(e);ce(n.size),n.forEach(function(e){return t.add(e)})})}function Kt(e){return Rt(e)&&s(e)}function Ht(e,t){var n=Object.create(tr);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Wt(){return nr||(nr=Ht(tt()))}function Vt(e){return null===e||void 0===e?Qt():Gt(e)?e:Qt().unshiftAll(e)}function Gt(e){return!(!e||!e[rr])}function Jt(e,t,n,r){var i=Object.create(ir);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Qt(){return or||(or=Jt(0))}function Yt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Xt(e,t){return t}function Zt(e,t){return[t,e]}function $t(e){return function(){return!e.apply(this,arguments)}}function en(e){return function(){return-e.apply(this,arguments)}}function tn(e){return"string"==typeof e?JSON.stringify(e):e}function nn(){return h(arguments)}function rn(e,t){return e<t?1:e>t?-1:0}function on(e){if(e.size===1/0)return 0;var t=s(e),n=a(e),r=t?1:0;return an(e.__iterate(n?t?function(e,t){r=31*r+un(oe(e),oe(t))|0}:function(e,t){r=r+un(oe(e),oe(t))|0}:t?function(e){r=31*r+oe(e)|0}:function(e){r=r+oe(e)|0}),r)}function an(e,t){return t=Tn(t,3432918353),t=Tn(t<<15|t>>>-15,461845907),t=Tn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Tn(t^t>>>16,2246822507),t=Tn(t^t>>>13,3266489909),t=ie(t^t>>>16)}function un(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var ln=Array.prototype.slice;e(n,t),e(r,t),e(i,t),t.isIterable=o,t.isKeyed=a,t.isIndexed=u,t.isAssociative=l,t.isOrdered=s,t.Keyed=n,t.Indexed=r,t.Set=i;var sn="@@__IMMUTABLE_ITERABLE__@@",cn="@@__IMMUTABLE_KEYED__@@",fn="@@__IMMUTABLE_INDEXED__@@",dn="@@__IMMUTABLE_ORDERED__@@",hn=5,pn=1<<hn,mn=pn-1,yn={},vn={value:!1},gn={value:!1},_n=0,bn=1,wn=2,En="function"==typeof Symbol&&Symbol.iterator,kn="@@iterator",Sn=En||kn;w.prototype.toString=function(){return"[Iterator]"},w.KEYS=_n,w.VALUES=bn,w.ENTRIES=wn,w.prototype.inspect=w.prototype.toSource=function(){return this.toString()},w.prototype[Sn]=function(){return this},e(M,t),M.of=function(){return M(arguments)},M.prototype.toSeq=function(){return this},M.prototype.toString=function(){return this.__toString("Seq {","}")},M.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},M.prototype.__iterate=function(e,t){return K(this,e,t,!0)},M.prototype.__iterator=function(e,t){return H(this,e,t,!0)},e(T,M),T.prototype.toKeyedSeq=function(){return this},e(j,M),j.of=function(){return j(arguments)},j.prototype.toIndexedSeq=function(){return this},j.prototype.toString=function(){return this.__toString("Seq [","]")},j.prototype.__iterate=function(e,t){return K(this,e,t,!1)},j.prototype.__iterator=function(e,t){return H(this,e,t,!1)},e(D,M),D.of=function(){return D(arguments)},D.prototype.toSetSeq=function(){return this},M.isSeq=L,M.Keyed=T,M.Set=D,M.Indexed=j;var Cn="@@__IMMUTABLE_SEQ__@@";M.prototype[Cn]=!0,e(z,j),z.prototype.get=function(e,t){return this.has(e)?this._array[m(this,e)]:t},z.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===e(n[t?r-i:i],i,this))return i+1;return i},z.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,i=0;return new w(function(){return i>r?k():E(e,i,n[t?r-i++:i++])})},e(N,T),N.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},N.prototype.has=function(e){return this._object.hasOwnProperty(e)},N.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[t?i-o:o];if(!1===e(n[a],a,this))return o+1}return o},N.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length-1,o=0;return new w(function(){var a=r[t?i-o:o];return o++>i?k():E(e,a,n[a])})},N.prototype[dn]=!0,e(A,j),A.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=I(n),i=0;if(C(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,i++,this););return i},A.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=I(n);if(!C(r))return new w(k);var i=0;return new w(function(){var t=r.next();return t.done?t:E(e,i++,t.value)})},e(P,j),P.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(!1===e(r[i],i++,this))return i;for(var o;!(o=n.next()).done;){var a=o.value;if(r[i]=a,!1===e(a,i++,this))break}return i},P.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,i=0;return new w(function(){if(i>=r.length){var t=n.next();if(t.done)return t;r[i]=t.value}return E(e,i,r[i++])})};var In;e(X,j),X.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},X.prototype.get=function(e,t){return this.has(e)?this._value:t},X.prototype.includes=function(e){return Q(this._value,e)},X.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:new X(this._value,_(t,n)-g(e,n))},X.prototype.reverse=function(){return this},X.prototype.indexOf=function(e){return Q(this._value,e)?0:-1},X.prototype.lastIndexOf=function(e){return Q(this._value,e)?this.size:-1},X.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},X.prototype.__iterator=function(e,t){var n=this,r=0;return new w(function(){return r<n.size?E(e,r++,n._value):k()})},X.prototype.equals=function(e){return e instanceof X?Q(this._value,e._value):Y(e)};var On;e($,j),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},$.prototype.get=function(e,t){return this.has(e)?this._start+m(this,e)*this._step:t},$.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},$.prototype.slice=function(e,t){return v(e,t,this.size)?this:(e=g(e,this.size),t=_(t,this.size),t<=e?new $(0,0):new $(this.get(e,this._end),this.get(t,this._end),this._step))},$.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},$.prototype.lastIndexOf=function(e){return this.indexOf(e)},$.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===e(i,o,this))return o+1;i+=t?-r:r}return o},$.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;return new w(function(){var a=i;return i+=t?-r:r,o>n?k():E(e,o++,a)})},$.prototype.equals=function(e){return e instanceof $?this._start===e._start&&this._end===e._end&&this._step===e._step:Y(this,e)};var xn;e(ee,t),e(te,ee),e(ne,ee),e(re,ee),ee.Keyed=te,ee.Indexed=ne,ee.Set=re;var Mn,Tn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){e|=0,t|=0;var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0},jn=Object.isExtensible,Dn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),zn="function"==typeof WeakMap;zn&&(Mn=new WeakMap);var Nn=0,An="__immutablehash__";"function"==typeof Symbol&&(An=Symbol(An));var Pn=16,Ln=255,Rn=0,qn={};e(fe,te),fe.prototype.toString=function(){return this.__toString("Map {","}")},fe.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},fe.prototype.set=function(e,t){return ke(this,e,t)},fe.prototype.setIn=function(e,t){return this.updateIn(e,yn,function(){return t})},fe.prototype.remove=function(e){return ke(this,e,yn)},fe.prototype.deleteIn=function(e){return this.updateIn(e,function(){return yn})},fe.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},fe.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=Ne(this,jt(e),t,n);return r===yn?void 0:r},fe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ee()},fe.prototype.merge=function(){return Te(this,void 0,arguments)},fe.prototype.mergeWith=function(e){return Te(this,e,ln.call(arguments,1))},fe.prototype.mergeIn=function(e){var t=ln.call(arguments,1);return this.updateIn(e,Ee(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},fe.prototype.mergeDeep=function(){return Te(this,je,arguments)},fe.prototype.mergeDeepWith=function(e){var t=ln.call(arguments,1);return Te(this,De(e),t)},fe.prototype.mergeDeepIn=function(e){var t=ln.call(arguments,1);return this.updateIn(e,Ee(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},fe.prototype.sort=function(e){return Ze(bt(this,e))},fe.prototype.sortBy=function(e,t){return Ze(bt(this,t,e))},fe.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},fe.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},fe.prototype.asImmutable=function(){return this.__ensureOwner()},fe.prototype.wasAltered=function(){return this.__altered},fe.prototype.__iterator=function(e,t){return new ge(this,e,t)},fe.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},fe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?we(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},fe.isMap=de;var Fn="@@__IMMUTABLE_MAP__@@",Bn=fe.prototype;Bn[Fn]=!0,Bn.delete=Bn.remove,Bn.removeIn=Bn.deleteIn,he.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Q(n,i[o][0]))return i[o][1];return r},he.prototype.update=function(e,t,n,r,i,o,a){for(var u=i===yn,l=this.entries,s=0,c=l.length;s<c&&!Q(r,l[s][0]);s++);var d=s<c;if(d?l[s][1]===i:u)return this;if(f(a),(u||!d)&&f(o),!u||1!==l.length){if(!d&&!u&&l.length>=Kn)return Oe(e,l,r,i);var p=e&&e===this.ownerID,m=p?l:h(l);return d?u?s===c-1?m.pop():m[s]=m.pop():m[s]=[r,i]:m.push([r,i]),p?(this.entries=m,this):new he(e,m)}},pe.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=1<<((0===e?t:t>>>e)&mn),o=this.bitmap;return 0==(o&i)?r:this.nodes[Ae(o&i-1)].get(e+hn,t,n,r)},pe.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var u=(0===t?n:n>>>t)&mn,l=1<<u,s=this.bitmap,c=0!=(s&l);if(!c&&i===yn)return this;var f=Ae(s&l-1),d=this.nodes,h=c?d[f]:void 0,p=Se(h,e,t+hn,n,r,i,o,a);if(p===h)return this;if(!c&&p&&d.length>=Hn)return Me(e,d,s,u,p);if(c&&!p&&2===d.length&&Ce(d[1^f]))return d[1^f];if(c&&p&&1===d.length&&Ce(p))return p;var m=e&&e===this.ownerID,y=c?p?s:s^l:s|l,v=c?p?Pe(d,f,p,m):Re(d,f,m):Le(d,f,p,m);return m?(this.bitmap=y,this.nodes=v,this):new pe(e,y,v)},me.prototype.get=function(e,t,n,r){void 0===t&&(t=oe(n));var i=(0===e?t:t>>>e)&mn,o=this.nodes[i];return o?o.get(e+hn,t,n,r):r},me.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var u=(0===t?n:n>>>t)&mn,l=i===yn,s=this.nodes,c=s[u];if(l&&!c)return this;var f=Se(c,e,t+hn,n,r,i,o,a);if(f===c)return this;var d=this.count;if(c){if(!f&&--d<Wn)return xe(e,s,d,u)}else d++;var h=e&&e===this.ownerID,p=Pe(s,u,f,h);return h?(this.count=d,this.nodes=p,this):new me(e,d,p)},ye.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Q(n,i[o][0]))return i[o][1];return r},ye.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=oe(r));var u=i===yn;if(n!==this.keyHash)return u?this:(f(a),f(o),Ie(this,e,t,n,[r,i]));for(var l=this.entries,s=0,c=l.length;s<c&&!Q(r,l[s][0]);s++);var d=s<c;if(d?l[s][1]===i:u)return this;if(f(a),(u||!d)&&f(o),u&&2===c)return new ve(e,this.keyHash,l[1^s]);var p=e&&e===this.ownerID,m=p?l:h(l);return d?u?s===c-1?m.pop():m[s]=m.pop():m[s]=[r,i]:m.push([r,i]),p?(this.entries=m,this):new ye(e,this.keyHash,m)},ve.prototype.get=function(e,t,n,r){return Q(n,this.entry[0])?this.entry[1]:r},ve.prototype.update=function(e,t,n,r,i,o,a){var u=i===yn,l=Q(r,this.entry[0]);return(l?i===this.entry[1]:u)?this:(f(a),u?void f(o):l?e&&e===this.ownerID?(this.entry[1]=i,this):new ve(e,this.keyHash,[r,i]):(f(o),Ie(this,e,t,oe(r),[r,i])))},he.prototype.iterate=ye.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===e(n[t?i-r:r]))return!1},pe.prototype.iterate=me.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[t?i-r:r];if(o&&!1===o.iterate(e,t))return!1}},ve.prototype.iterate=function(e,t){return e(this.entry)},e(ge,w),ge.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,i=t.index++;if(r.entry){if(0===i)return _e(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return _e(e,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return _e(e,o.entry);t=this._stack=be(o,t)}continue}t=this._stack=this._stack.__prev}return k()};var Un,Kn=pn/4,Hn=pn/2,Wn=pn/4;e(qe,ne),qe.of=function(){return this(arguments)},qe.prototype.toString=function(){return this.__toString("List [","]")},qe.prototype.get=function(e,t){if((e=m(this,e))>=0&&e<this.size){e+=this._origin;var n=Je(this,e);return n&&n.array[e&mn]}return t},qe.prototype.set=function(e,t){return We(this,e,t)},qe.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},qe.prototype.insert=function(e,t){return this.splice(e,0,t)},qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=hn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):He()},qe.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Qe(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},qe.prototype.pop=function(){return Qe(this,0,-1)},qe.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Qe(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},qe.prototype.shift=function(){return Qe(this,1)},qe.prototype.merge=function(){return Ye(this,void 0,arguments)},qe.prototype.mergeWith=function(e){return Ye(this,e,ln.call(arguments,1))},qe.prototype.mergeDeep=function(){return Ye(this,je,arguments)},qe.prototype.mergeDeepWith=function(e){var t=ln.call(arguments,1);return Ye(this,De(e),t)},qe.prototype.setSize=function(e){return Qe(this,0,e)},qe.prototype.slice=function(e,t){var n=this.size;return v(e,t,n)?this:Qe(this,g(e,n),_(t,n))},qe.prototype.__iterator=function(e,t){var n=0,r=Ue(this,t);return new w(function(){var t=r();return t===Qn?k():E(e,n++,t)})},qe.prototype.__iterate=function(e,t){for(var n,r=0,i=Ue(this,t);(n=i())!==Qn&&!1!==e(n,r++,this););return r},qe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ke(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},qe.isList=Fe;var Vn="@@__IMMUTABLE_LIST__@@",Gn=qe.prototype;Gn[Vn]=!0,Gn.delete=Gn.remove,Gn.setIn=Bn.setIn,Gn.deleteIn=Gn.removeIn=Bn.removeIn,Gn.update=Bn.update,Gn.updateIn=Bn.updateIn,Gn.mergeIn=Bn.mergeIn,Gn.mergeDeepIn=Bn.mergeDeepIn,Gn.withMutations=Bn.withMutations,Gn.asMutable=Bn.asMutable,Gn.asImmutable=Bn.asImmutable,Gn.wasAltered=Bn.wasAltered,Be.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&mn;if(r>=this.array.length)return new Be([],e);var i,o=0===r;if(t>0){var a=this.array[r];if((i=a&&a.removeBefore(e,t-hn,n))===a&&o)return this}if(o&&!i)return this;var u=Ge(this,e);if(!o)for(var l=0;l<r;l++)u.array[l]=void 0;return i&&(u.array[r]=i),u},Be.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r=n-1>>>t&mn;if(r>=this.array.length)return this;var i;if(t>0){var o=this.array[r];if((i=o&&o.removeAfter(e,t-hn,n))===o&&r===this.array.length-1)return this}var a=Ge(this,e);return a.array.splice(r+1),i&&(a.array[r]=i),a};var Jn,Qn={};e(Ze,fe),Ze.of=function(){return this(arguments)},Ze.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ze.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Ze.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Ze.prototype.set=function(e,t){return nt(this,e,t)},Ze.prototype.remove=function(e){return nt(this,e,yn)},Ze.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ze.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Ze.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Ze.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Ze.isOrderedMap=$e,Ze.prototype[dn]=!0,Ze.prototype.delete=Ze.prototype.remove;var Yn;e(rt,T),rt.prototype.get=function(e,t){return this._iter.get(e,t)},rt.prototype.has=function(e){return this._iter.has(e)},rt.prototype.valueSeq=function(){return this._iter.valueSeq()},rt.prototype.reverse=function(){var e=this,t=st(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},rt.prototype.map=function(e,t){var n=this,r=lt(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},rt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?It(this):0,function(i){return e(i,t?--n:n++,r)}),t)},rt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(bn,t),r=t?It(this):0;return new w(function(){var i=n.next();return i.done?i:E(e,t?--r:r++,i.value,i)})},rt.prototype[dn]=!0,e(it,j),it.prototype.includes=function(e){return this._iter.includes(e)},it.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},it.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t),r=0;return new w(function(){var t=n.next();return t.done?t:E(e,r++,t.value,t)})},e(ot,D),ot.prototype.has=function(e){return this._iter.includes(e)},ot.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},ot.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new w(function(){var t=n.next();return t.done?t:E(e,t.value,t.value,t)})},e(at,T),at.prototype.entrySeq=function(){return this._iter.toSeq()},at.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){Ct(t);var r=o(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},at.prototype.__iterator=function(e,t){var n=this._iter.__iterator(bn,t);return new w(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Ct(r);var i=o(r);return E(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}})},it.prototype.cacheResult=rt.prototype.cacheResult=ot.prototype.cacheResult=at.prototype.cacheResult=Mt,e(Dt,te),Dt.prototype.toString=function(){return this.__toString(Nt(this)+" {","}")},Dt.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Dt.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},Dt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=zt(this,Ee()))},Dt.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Nt(this));var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:zt(this,n)},Dt.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:zt(this,t)},Dt.prototype.wasAltered=function(){return this._map.wasAltered()},Dt.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterator(e,t)},Dt.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterate(e,t)},Dt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?zt(this,t,e):(this.__ownerID=e,this._map=t,this)};var Xn=Dt.prototype;Xn.delete=Xn.remove,Xn.deleteIn=Xn.removeIn=Bn.removeIn,Xn.merge=Bn.merge,Xn.mergeWith=Bn.mergeWith,Xn.mergeIn=Bn.mergeIn,Xn.mergeDeep=Bn.mergeDeep,Xn.mergeDeepWith=Bn.mergeDeepWith,Xn.mergeDeepIn=Bn.mergeDeepIn,Xn.setIn=Bn.setIn,Xn.update=Bn.update,Xn.updateIn=Bn.updateIn,Xn.withMutations=Bn.withMutations,Xn.asMutable=Bn.asMutable,Xn.asImmutable=Bn.asImmutable,e(Lt,re),Lt.of=function(){return this(arguments)},Lt.fromKeys=function(e){return this(n(e).keySeq())},Lt.prototype.toString=function(){return this.__toString("Set {","}")},Lt.prototype.has=function(e){return this._map.has(e)},Lt.prototype.add=function(e){return qt(this,this._map.set(e,!0))},Lt.prototype.remove=function(e){return qt(this,this._map.remove(e))},Lt.prototype.clear=function(){return qt(this,this._map.clear())},Lt.prototype.union=function(){var e=ln.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Lt.prototype.intersect=function(){var e=ln.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Lt.prototype.subtract=function(){var e=ln.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Lt.prototype.merge=function(){return this.union.apply(this,arguments)},Lt.prototype.mergeWith=function(e){var t=ln.call(arguments,1);return this.union.apply(this,t)},Lt.prototype.sort=function(e){return Ut(bt(this,e))},Lt.prototype.sortBy=function(e,t){return Ut(bt(this,t,e))},Lt.prototype.wasAltered=function(){return this._map.wasAltered()},Lt.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},Lt.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Lt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Lt.isSet=Rt;var Zn="@@__IMMUTABLE_SET__@@",$n=Lt.prototype;$n[Zn]=!0,$n.delete=$n.remove,$n.mergeDeep=$n.merge,$n.mergeDeepWith=$n.mergeWith,$n.withMutations=Bn.withMutations,$n.asMutable=Bn.asMutable,$n.asImmutable=Bn.asImmutable,$n.__empty=Bt,$n.__make=Ft;var er;e(Ut,Lt),Ut.of=function(){return this(arguments)},Ut.fromKeys=function(e){return this(n(e).keySeq())},Ut.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ut.isOrderedSet=Kt;var tr=Ut.prototype;tr[dn]=!0,tr.__empty=Wt,tr.__make=Ht;var nr;e(Vt,ne),Vt.of=function(){return this(arguments)},Vt.prototype.toString=function(){return this.__toString("Stack [","]")},Vt.prototype.get=function(e,t){var n=this._head;for(e=m(this,e);n&&e--;)n=n.next;return n?n.value:t},Vt.prototype.peek=function(){return this._head&&this._head.value},Vt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Jt(e,t)},Vt.prototype.pushAll=function(e){if(e=r(e),0===e.size)return this;ce(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Jt(t,n)},Vt.prototype.pop=function(){return this.slice(1)},Vt.prototype.unshift=function(){return this.push.apply(this,arguments)},Vt.prototype.unshiftAll=function(e){return this.pushAll(e)},Vt.prototype.shift=function(){return this.pop.apply(this,arguments)},Vt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Qt()},Vt.prototype.slice=function(e,t){if(v(e,t,this.size))return this;var n=g(e,this.size);if(_(t,this.size)!==this.size)return ne.prototype.slice.call(this,e,t);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):Jt(r,i)},Vt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Jt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Vt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},Vt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new w(function(){if(r){var t=r.value;return r=r.next,E(e,n++,t)}return k()})},Vt.isStack=Gt;var rr="@@__IMMUTABLE_STACK__@@",ir=Vt.prototype;ir[rr]=!0,ir.withMutations=Bn.withMutations,ir.asMutable=Bn.asMutable,ir.asImmutable=Bn.asImmutable,ir.wasAltered=Bn.wasAltered;var or;t.Iterator=w,Yt(t,{toArray:function(){ce(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new it(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new rt(this,!0)},toMap:function(){return fe(this.toKeyedSeq())},toObject:function(){ce(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Ze(this.toKeyedSeq())},toOrderedSet:function(){return Ut(a(this)?this.valueSeq():this)},toSet:function(){return Lt(a(this)?this.valueSeq():this)},toSetSeq:function(){return new ot(this)},toSeq:function(){return u(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Vt(a(this)?this.valueSeq():this)},toList:function(){return qe(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return St(this,yt(this,ln.call(arguments,0)))},includes:function(e){return this.some(function(t){return Q(t,e)})},entries:function(){return this.__iterator(wn)},every:function(e,t){ce(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!e.call(t,r,i,o))return n=!1,!1}),n},filter:function(e,t){return St(this,ct(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},findEntry:function(e,t){var n;return this.__iterate(function(r,i,o){if(e.call(t,r,i,o))return n=[i,r],!1}),n},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return ce(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ce(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""}),t},keys:function(){return this.__iterator(_n)},map:function(e,t){return St(this,lt(this,e,t))},reduce:function(e,t,n){ce(this.size);var r,i;return arguments.length<2?i=!0:r=t,this.__iterate(function(t,o,a){i?(i=!1,r=t):r=e.call(n,r,t,o,a)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return St(this,st(this,!0))},slice:function(e,t){return St(this,ht(this,e,t,!0))},some:function(e,t){return!this.every($t(e),t)},sort:function(e){return St(this,bt(this,e))},values:function(){return this.__iterator(bn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return p(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return ft(this,e,t)},equals:function(e){return Y(this,e)},entrySeq:function(){var e=this;if(e._cache)return new z(e._cache);var t=e.toSeq().map(Zt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter($t(e),t)},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},first:function(){return this.find(y)},flatMap:function(e,t){return St(this,gt(this,e,t))},flatten:function(e){return St(this,vt(this,e,!0))},fromEntrySeq:function(){return new at(this)},get:function(e,t){return this.find(function(t,n){return Q(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,i=jt(e);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,yn):yn)===yn)return t}return r},groupBy:function(e,t){return dt(this,e,t)},has:function(e){return this.get(e,yn)!==yn},hasIn:function(e){return this.getIn(e,yn)!==yn},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keySeq:function(){return this.toSeq().map(Xt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return wt(this,e)},maxBy:function(e,t){return wt(this,t,e)},min:function(e){return wt(this,e?en(e):rn)},minBy:function(e,t){return wt(this,t?en(t):rn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return St(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return St(this,mt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile($t(e),t)},sortBy:function(e,t){return St(this,bt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return St(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return St(this,pt(this,e,t))},takeUntil:function(e,t){return this.takeWhile($t(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var ar=t.prototype;ar[sn]=!0,ar[Sn]=ar.values,ar.__toJS=ar.toArray,ar.__toStringMapper=tn,ar.inspect=ar.toSource=function(){return this.toString()},ar.chain=ar.flatMap,ar.contains=ar.includes,function(){try{Object.defineProperty(ar,"length",{get:function(){if(!t.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Yt(n,{flip:function(){return St(this,ut(this))},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return Q(t,e)})},lastKeyOf:function(e){return this.findLastKey(function(t){return Q(t,e)})},mapEntries:function(e,t){var n=this,r=0;return St(this,this.toSeq().map(function(i,o){return e.call(t,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return St(this,this.toSeq().flip().map(function(r,i){return e.call(t,r,i,n)}).flip())}});var ur=n.prototype;return ur[cn]=!0,ur[Sn]=ar.entries,ur.__toJS=ar.toObject,ur.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tn(e)},Yt(r,{toKeyedSeq:function(){return new rt(this,!1)},filter:function(e,t){return St(this,ct(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return St(this,st(this,!1))},slice:function(e,t){return St(this,ht(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=g(e,e<0?this.count():this.size);var r=this.slice(0,e);return St(this,1===n?r:r.concat(h(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.toKeyedSeq().findLastKey(e,t);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(e){return St(this,vt(this,e,!1))},get:function(e,t){return e=m(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=m(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return St(this,_t(this,e))},interleave:function(){var e=[this].concat(h(arguments)),t=kt(this.toSeq(),j.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),St(this,n)},last:function(){return this.get(-1)},skipWhile:function(e,t){return St(this,mt(this,e,t,!1))},zip:function(){return St(this,kt(this,nn,[this].concat(h(arguments))))},zipWith:function(e){var t=h(arguments);return t[0]=this,St(this,kt(this,e,t))}}),r.prototype[fn]=!0,r.prototype[dn]=!0,Yt(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=ar.includes,Yt(T,n.prototype),Yt(j,r.prototype),Yt(D,i.prototype),Yt(te,n.prototype),Yt(ne,r.prototype),Yt(re,i.prototype),{Iterable:t,Seq:M,Collection:ee,Map:fe,OrderedMap:Ze,List:qe,Stack:Vt,Set:Lt,OrderedSet:Ut,Record:Dt,Range:$,Repeat:X,is:Q,fromJS:W}})},function(e,t){e.exports=i}])});